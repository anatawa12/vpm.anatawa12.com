[{"id":0,"href":"/avatar-optimizer/beta/ja/docs/tutorial/","title":"チュートリアル","section":"Docs","content":""},{"id":1,"href":"/avatar-optimizer/beta/ja/posts/2024-06-27-one-year-since-stable-release/","title":"v1.0.0一周年を記念してちょっと歴史を振り返る","section":"Posts","content":"AAO: Avatar Optimizer v1.0.0一周年を記念してちょっと歴史を振り返ってみることにしてみる。\n書いた人はanatawa12なので「私」はanatawa12を指す。\nAvatar Optimizerが生まれるまで # 2021年11月 # 私がVRChatを始める。 このときにPublic (現在のLegacy欄)アバターから 2a7sちゃんを選んで使うことにした。 そしてこの子はSDK2アバターでかつ、パーツが結合された状態でfbxが組まれていた。 このときの経験がSkinned Mesh Rendererを増やすことに対する待避感につながってる気がする。\n2022年 # 和服を作ってた間などに(?)fbx更新でモデルがひどくなることの対策にprefab variantが使えることを知った。 それで非破壊で服を着せるツールが欲しくなってたりした。\nまた、買っただけになってたアバターなどをアップロードを始めてメッシュの分割などが多くて結合するツールが欲しくなってたが、 お金はかけたくなかった。\n2022年11月末 # Modular Avatar v1.0.0がリリースされる。\n【告知】\nModular Avatarの正式版は本日から無料配布開始！今までとは違う、非破壊的なアバター組み立て支援ツールです！できた実感がないほどスムーズな衣装導入や、複雑なギミックの導入支援ができたりします！\nDLページ、詳細などはこちらです！ https://t.co/eGhSMxsQK9 pic.twitter.com/hdXc7CAzll\n\u0026mdash; bd_ (@bd_j) November 27, 2022 当日中にvpmでインストールして使ってみて、すぐに良さそうだなってなった。 と同時にissueとか書き始める(PhysBone Blockerとか)。\nAvatar Optimizerが生まれる # pre-0.0.1 (2022年12月末) # Modular Avatarを読んでできそうということで、PhysBoneやMerge Skinned Meshのマージをするツールを作り始める。 当初はMergerという名前で作っていた。\n(この名残で https://github.com/anatawa12/Merger というリンクでからAvatar Optimizerに飛べるようになっています。)\nPhysBoneをいい感じにマージするツール作成中...\nというかツール名的にはMergerにしてメッシュも統合できたらなと思ってたり pic.twitter.com/NxqvUIeMCF\n\u0026mdash; anatawa12@VRC @anatawa12@misskey.niri.la (@anatawa12_vrc) December 27, 2022 0.0.1~0.1.3 (2023年1月~2月) # マージする以外にBlendShapeの固定機能等をいれることにしてAvatarOptimizerに改名し、初回リリースをする。 https://github.com/anatawa12/AvatarOptimizer/releases/tag/v0.0.1\nREADMEに書かれてる通り、以下のコンポーネントが当時あった。\nMerge Skinned Mesh Merge PhysBone Freeze BlendShape Merge Bone Clear Endpoint Position その後、0.0.2ではMerge ToonLit Material, 0.1.1ではRemove Mesh in Boxを追加し、バグ修正でリリースを行っていた。\nAvatar Optimizerが広まり始める # v0.2.0開発中 \u0026amp; 0.1.4 (2023年2月頭) # 保存形式の破壊的変更を行うため、v0.2.0を開発中、Avatar Optimizerの紹介記事が書かれる。 ModularAvatarとAvatarOptimizerを使ったアバター編集｜かんとう\n当時の私の叫び\nまって。私のAvatarOptimizerが記事になってるんだけど!? ModularAvatarとAvatarOptimizerを使ったアバター編集｜かんとう @kantosho_vrc #note https://t.co/XIDIEhdWhO\n\u0026mdash; anatawa12@VRC @anatawa12@misskey.niri.la (@anatawa12_vrc) February 24, 2023 破壊的変更に対応させるために 0.1.4 で破壊的変更への準備リリースを急遽用意し、マイグレーションの仕組みの開発を決定\n継続的な開発 # v0.2.0 (2023年3月頭) # いくつかのprereleaseを経て、v0.2.0をリリースした。\nこの時期からそれなりにクオリティを保ったソフトウェアとして開発を進めていくことになる。 そのため、Changelogの管理やprereleaseの仕組みを追加したのがこの時期。\nv0.2.2 (2023年3月中旬) # Make Childrenコンポーネントを追加。 v1.0.0まで残るのですが、今となってはこれをAAOに入れたのは後悔してる。 (当初はNDMFがなく、Apply on playがクソ大変だったのでAvatar Optimizerに入れちゃってた。)\nv0.2.6 (2023年3月末) # 多言語サポートの内部的な追加を行う(が、日本語の追加は0.4.0まで延びる)。 (誰か和訳作ってくれ〜と思ってたけど誰もやってくれなかった。)\nv0.3.2 (2023年5月) # 公式ドキュメントを作成。\n書くの面倒だなぁって思いながら書いていた。\nv0.4.0-v0.4.12 (2023年6月) # 日本語の追加やMergePhysBoneの保存形式の変更を行ってた。\nv1.0.0を見据えて色々準備してた。\nついに安定版 # v1.0.0 (2023年6月末) # 半月ほどのprereleaseを経て、v1.0.0をリリースした。\nやっとできたって感じがあった。 さやまめさんに背中押されたりして大々的に告知を打ったら拡散され方に少し恐れてた\n非破壊でアバターの軽量化が出来るツール、Avatar OptimizerをBoothでも公開しました!\nModular Avatarとの併用が可能です！\n導入方法は公式サイトか付属のreadmeファイルをご確認ください!#booth_pm #VRChat #AvatarOptimizer\n[無料] Avatar Optimizer | anatawa12 https://t.co/xhFMPx2y2q pic.twitter.com/8BP8RpSEeX\n\u0026mdash; anatawa12@VRC @anatawa12@misskey.niri.la (@anatawa12_vrc) June 27, 2023 v1.1.x (2023年7月中旬~) # このタイミングでModular AvatarのApply on Playを上書きする仕組みなどを追加した。\n当初は内部的な仕組みを公開するつもりがある程度あったけど、後にNDMFで全く別な形になる。\nv1.2.0 (2023年7月中旬) # 今日のAvatar Optimizerの目玉機能となった Trace and Optimize の前身となる Automatic Configuration 機能を追加した。\n当時は FreezeBlendShape の自動的に設定を行っていた。この時点では手動設定のできるものを自動的に設定する機能のみであったため、 Automatic Configuration という名前になっていた。\n当初はここまで目玉になるとは思ってなかった。\nv1.3.x (2023年8月中旬~) # 使われていないものの削除のように自動設定以上のものが追加されたため、Automatic Configuration が Trace and Optimize に改名された。\nまた、Avatar Optimizerの名前がAnatawa12\u0026rsquo;s Avatar Optimizerとされ、AAOという略称も定まった。\n当初からAnatawa12\u0026rsquo;sを入れるのが嫌いじゃなかったので後にAAO: Avatar Optimizerと再帰的接頭語に変更された。\nv1.4.x (2023年9月頭~) # Trace and Optimizeで使っていたAnimatorのパーサーが強化された。\nこのリリースは主にバグ修正だけど大きな変更があったからminorにした記憶がある。\nv1.5.x (2023年10月頭~) # Modular Avatarなどの非破壊ツール向けのフレームワークであるNon Destructive Modifying Frameworkがリリースされ、合わせてAAOもNDMFに対応した。\nまた、この時期から本格的に Trace and Optimize に注力するようになる。\nv1.6.x (2023年11月末~) # Trace and Optimizeへのコンポーネント対応を追加するためのAPIを整備した。\nまた、Trace and OptimizeにメッシュのオンオフにPhysBoneが追従する機能を追加した。\nv1.6.3 (2023年12月初旬) # VRCSDK 3.5.0の3時間betaに振り回されたリリース\nCHANGELOGより引用\nI was planned to release this changes while VRCSDK 3.5.0 is in beta. However, VRCSDK 3.5.0 beta was only 3 hours so I could not. このVRCSDKの動きが vrc-get-gui / ALCOM を作る原動力になった。\nv1.7.x (2024年4月中旬~現在) # Animator Optimizerや自動 Merge Skinned Mesh、コンポーネント自身のAPI、Remove Mesh by Mask等とともにリリース。\nVRCSDK 3.5.0 + VCC 2.2.0の酷さに困って vrc-get-gui (現ALCOM) を作ってたので間が空いてしまった。\n結構長い間空いちゃったなぁと思いつついろんな最適化を入れれてるので満足してる。\n未来 # 今後はTrace and Optimizeの機能を強化していこうかなと思ってる。 特にテクスチャメモリ周りを一切触れていないのでうまいことやりたいなぁと思ってる。\n"},{"id":2,"href":"/avatar-optimizer/beta/ja/docs/basic-concept/","title":"基本コンセプト","section":"Docs","content":" Avatar Optimizerの基本コンセプト # このページでは、Avatar Optimizerの基本コンセプトについて説明します。\nAvatar Optimizerとは？ # Avatar Optimizerは、アバターを非破壊的に最適化するためのツールです。 このツールはVRChatアバター向けに設計されていましたが、NDMFでサポートされている他のプラットフォームのアバターにも使用できるかもしれません。\n(Avatar Optimizerにおいて、)「非破壊的」とは以下のことを指します。\nAvatar Optimizerを使用するためにプレハブを展開(unpack)する必要がないこと。 Avatar Optimizerを使用するために必要なことは、コンポーネントを追加することだけです。 Avatar Optimizerはプロジェクトに保存されているアバターに一切影響を与えず、ビルド中に生成されるアバターデータの一時コピーにのみ影響すること。 なお、VRChat以外のプラットフォームのアバターに対するサポートは主にコミュニティベースであり、Avatar Optimizerの開発チームにはサポートされない場合があります。\nAvatar Optimizerの目的は何ですか？ # このツールは、アバターの見た目を殆ど変化させることなく、アバターのパフォーマンスを非破壊的に最適化できるようにすることを目的として設計されています。 そのため、このツールでアバターの振る舞いを変更することは意図していません。\n意図していない動作によるアバターの振る舞いの変更は、一部のユースケースで有用かもしれませんが、バグとして扱われます。\nそのバグが殆どのユースケースに影響を与えない場合、バグの修正を一時的に見合わせることがありますが、バグによる振る舞いは他のコンポーネントで考慮されないかもしれません。\n例えば、1.7.x以前のAAO Merge Skinned Meshコンポーネントは同名のBlendShapeを統合します。\nBlendShapeを統合すると、そのBlendShapeに対するアニメーションによる動作が変わってしまうため、これはバグとして扱われます。\nこのバグを使用して、あるSkinned Mesh RendererのBlendShapeに対するアニメーションを、別のSkinned Mesh RendererのBlendShapeに対しても同時に作用させることができます。\nしかし、これはサポートされていない動作であり、他のコンポーネントが動作を壊すかもしれません。\n例えば、AAO Trace and OptimizeコンポーネントのBlendShapeを自動的に固定・除去するは、このバグによってAAO Merge Skinned Meshコンポーネントで統合されて動くようになる可能性があるBlendShapeであっても、固定・除去します。\nAvatar Optimizerの振る舞いは将来のバージョンでも安定していますか？ # Avatar Optimizerはバージョン管理にセマンティックバージョニングを使用しており、コンポーネントの振る舞いには主にセマンティックバージョニングのルールを適用しています。\nすなわち、アバターに既に付いているコンポーネントの振る舞いは、同じメジャーバージョン内では変更されないことが保証されます。\n既存のコンポーネントに対して新しい機能が追加された場合には、それ以降にアバターに新たに追加されたコンポーネントの振る舞いのみ、それ以前のものから変更されることがあります。\n一部のバグでは、そのバグを修正することによってコンポーネントの振る舞いが大幅に変更される場合があります。 そのような場合には、新たな振る舞いを有効化するためのオプションを追加します。\nアバターに既に付いているコンポーネントでは、このオプションをデフォルトで無効にすることで以前までの振る舞いを維持し、 アバターに新たに追加されたコンポーネントでは、このオプションをデフォルトで有効にすることで、バグが修正された新しい動作を行います。\nこういったコンポーネントの振る舞いの維持には、いくつか例外があります。\nコンポーネントのデバッグ専用の機能は、上記のルールに従うことが保証されません。\n例えば、AAO Trace and OptimizeコンポーネントのDebug Optionsは変更される可能性が常にあります。 実験的な機能としてマークされている機能は、上記のルールに従うことが保証されません。 AAO Trace and Optimizeコンポーネントの振る舞いは、新しい最適化を実装することによって変更される可能性があります。\nただし、AAO Trace and Optimizeコンポーネントのデフォルト設定では、アバターの振る舞いや見た目に影響を与えないようにしているため、この変更はアバターに一切影響を与えないはずです。 これら以外で不自然な動作や奇妙な動作などに遭遇した場合は、まずFAQをご覧ください。\n"},{"id":3,"href":"/avatar-optimizer/beta/ja/docs/faq/","title":"よくある質問","section":"Docs","content":" よくある質問 # Avatar Optimizerに関するよくある質問のリストです。 他に質問がある場合は、GitHub DiscussionsまたはFediverse (Misskey / Mastodon)でお気軽にお尋ねください。\nAAO Trace and Optimizeコンポーネントを使用すると、アバターの振る舞いや見た目が変わる # AAO Trace and Optimizeコンポーネントを使用して、アバターの振る舞いや見た目が変わってしまった場合は、(アバターがAvatar Optimizerの他のコンポーネントのバグ挙動に依存していない限り、)全てバグです。 GitHub IssuesやFediverse (Misskey / Mastodon)、Twitterなどから報告をお願いします。\nメッシュが視界の中にあるのに非表示になってしまう # 多くの場合、この問題はSkinned Mesh RendererのRoot Boneを指定し忘れていることが原因です。\nAAO Merge Skinned MeshコンポーネントはRoot Boneの設定を自動的には行わないため、統合先のメッシュ1のRoot Boneを手動で設定する必要があります。\nModular Avatarを使用している場合は、アバターのルートにMA Mesh Settingsコンポーネントを追加して設定することにより、アバター全体のRoot BoneとBoundsを設定することができます。\nAAO Merge Skinned Meshコンポーネントで統合したメッシュの明るさが他のメッシュと異なる # 多くの場合、この問題は統合先のメッシュのAnchor Overrideを指定し忘れていることが原因です。\nAAO Merge Skinned MeshコンポーネントはAnchor Overrideの設定を自動的には行わないため、統合先のメッシュ1のAnchor Overrideを手動で設定する必要があります。\nModular Avatarを使用している場合は、アバターのルートにMA Mesh Settingsコンポーネントを追加して設定することにより、アバター全体のAnchor Overrideを設定することができます。\nAAO Merge Skinned Meshコンポーネントを使用すると、マテリアルプロパティに対するアニメーションが競合する # この問題は既知のバグであり、現時点では競合してしまう仕様です。\nマテリアルプロパティに対してアニメーションされるメッシュを統合する際は、競合しないようご注意ください。 競合する場合は警告が表示されるので、そちらを確認してください。\nこの問題のissue: #340\nAAO Merge Skinned Meshコンポーネントを使用すると、マテリアルスロットに対するアニメーションが競合する # AAO Merge Skinned Meshコンポーネントは、統合対象のメッシュで同じマテリアルを使用しているマテリアルスロットをデフォルトで統合します。 これにはアニメーションされるマテリアルスロットも含まれます。\nアニメーションによってそれぞれのマテリアルを別のものに置き換える場合は、AAO Merge Skinned Meshコンポーネントのマテリアルの統合の統合するをオフにしてください。\nAAO Merge Skinned Meshコンポーネントを使用すると、BlendShapeに対するアニメーションが競合する # この問題は既知のバグであり、現時点では競合してしまう仕様です。\nBlendShapeに対してアニメーションされるメッシュを統合する際は、競合しないようご注意ください。 競合する場合は警告が表示されるので、そちらを確認してください。\nこの問題のissue: #568\nOSCギミックで使用されているPhysBone / Contact Receiverが動作していない # AAO Trace and Optimizeコンポーネントは、アバターの振る舞いを変えないように慎重に設計されています。 しかし、技術的な理由から、AAO Trace and OptimizeコンポーネントはPhysBone / Contact ReceiverコンポーネントがOSCギミックで使用されているかどうかを判断することができません。\n最近のアバターは、PhysBone / Contact Receiverコンポーネントを使用した独自のギミックを持っていることがあるため、これらのコンポーネントを削除し忘れることがよくあります。 そのため、AAO Trace and Optimizeは、そのようなコンポーネントがOSCギミックで使用されていないと仮定して、それらが他の用途で使われていなければ削除します。\nもちろん、仮定が正しいとは限らないため、PhysBone / Contact ReceiverコンポーネントをOSCギミックに使用している場合には、それらが使用されていると分かるようにアバターを調整してもらわなければならないかもしれません。\nAAO Trace and Optimizeは、アバター内のAnimatorにあるパラメーターと同じパラメーターが使用されているPhysBone / Contact Receiverコンポーネントを削除しないようになっています。 そのため、OSCギミックで使用されるパラメーターを、Animator Controllerのパラメーター一覧やExpression Parameterに追加することで、これらのコンポーネントが削除されないようになります。\nまた、改善のための議論の材料として、OSCギミックで使われているPhysBoneやContact Receiverが削除された場合には、それらに設定されているパラメータ名を教えていただけると助かります。 将来的に、有名なOSCギミックによって使用されるパラメーターの一覧を実装して、それらのパラメータが使用されている場合はコンポーネントを保持するような形を取るかもしれませんし、他の方法で対処するかもしれません。\n以下のissueやFediverse (Misskey / Mastodon)、Twitterなどでお気軽にお知らせください。\nこの問題のissue: #1090\nビルド前のハードリミットチェックのせいでアバターをアップロードできない # Avatar Optimizerなどの非破壊的なアバター改変ツールを使うと、元々ハードリミットを超えているようなアバターでも、ビルド後にはハードリミットを超えないようになることがあります。 しかし、VRCSDKのコントロールパネルにあるアップロードボタンは、シーン上のアバターがハードリミットを超えている場合には押せないようになっています。\nそのような場合でも、以下のような方法を使って、ビルド前のハードリミットチェックを飛ばしてアップロードすることができます。 (ビルド後のハードリミットチェックも存在するため、ビルド後にハードリミットを超える場合は以下の方法でもアップロードに失敗します。)\nManual bake avatarで生成したアバターをアップロードする。\\\nアバターのGameObjectを右クリックして出てくるメニューのNDM FrameworkからManual bake avatarをクリックすると、非破壊ツールによる処理を手動で適用することができます。 Manual bake avatarは初めにアバターを複製し、その複製に対して非破壊ツールの処理を適用させるため、元のアバターは変更されないままになります。\nSayamame-beansのUpload without pre-checkを使用してアップロードする。\nUpload without pre-checkは、ビルド前のハードリミットチェックをスキップしてアップロードするためのツールです。\nkurotuのVRCQuestToolsを使用する\nVRCQuestToolsは、アバターをAndroid / Quest対応アバターに変換するためのツールです。\nこのツールには、ビルド前チェックをスキップしてアバターをAndroid向けにビルドするためのVQT Avatar Builderという機能が含まれています。\nAvatar Optimizerの開発を支援したい # Avatar Optimizerの開発を支援したい場合、GitHub DiscussionsでのフィードバックやGitHub Issuesでのバグ報告、機能追加の要望、またプルリクエストなどを歓迎しています。\ngood first issueが付いているissueは、比較的実装が簡単なissueです。初めてのプルリクエストにおすすめです。 また、help wantedが付いているissueは、開発者や情報などが不足しているissueです。議論や開発に参加していただけると助かります。\nなお、GitHub SponsorsやBoothでの金銭的な支援も受け付けています。\n統合先のメッシュとは、AAO Merge Skinned Meshコンポーネントと一緒に付いているSkinned Mesh Rendererのことです。\u0026#160;\u0026#x21a9;\u0026#xfe0e;\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n"},{"id":4,"href":"/avatar-optimizer/beta/ja/docs/changelog/","title":"Changelog","section":"Docs","content":" Changelog # このプロジェクトの重要な変更点は以下のとおりです。\nKeep a Changelogをベースにした形式で表記されています。\n1.8.0-beta.4 - 2024-10-05 # Changed # Animator Parser Debug Window now supports ObjectReference animation support #1222 Reimplemented Animator Parser node system #1227 Renamed debug options internally #1228 This will lose previously configured debug options. However, debug options are not considered as Public API as stated in documents so this is not backward incompatible changes in semver 2.0.0 section 8. Fixed # API about Prefab Safe Set are broken with prefab instance #1219 Optimize Texture may cause false positive optimization with blendtree #1225 Error with PrefabSafeSet #1221 1.8.0-beta.3 - 2024-09-30 # Added # API to get in advance whether a polygon will be removed #1177 Changed # Improved Prefab Safe Set, which are used in MergePhysBone, MergeSkinnedMesh, FreezeBlendShape and more components #1212 This should improve compatibility with replacing base prefab, which is added in Unity 2022. Allow multiple component for Remove Mesh components with API #1216 #1218 This allows non-destructive tools to add Remove Mesh components even if Remove Mesh component are added before. Fixed # Typo in menu for creating Asset Description #1213 Optimize Texture broken with Crunch Compression #1215 1.8.0-beta.2 - 2024-09-25 # Changed # Reimplement Preview system with NDMF Preview System #1131 This will prevent issues relates to Animation Mode bug. This allows you to preview Remove Mesh components without selecting Mesh OR while in Animation Mode. Fixed # Texture Packing which resolves to the white texture would break the Unity Editor #1193 Performance issues with preview system #1195 Avatar Optimizer does not support Additive Reference Pose #1208 1.7.13-beta.1 - 2024-09-23 # Fixed # Null Reference Exception with newly created VRCAnimatorPlayAudio #1199 Particle System that uses local scale will be broken #1197 Avatars with Visame Skinned Mesh disabled will not able to upload #1202 1.8.0-beta.1 - 2024-09-20 # Added # AnyState to Entry/Exit optimization in Optimize Animator #1157 If AAO found animator layer only with AnyState, AAO tries to convert them to Entry / Exit pattern. Currently due to implementation there are some patterns that can be convert but but not converted. We may relax some restriction in the future. Because we have to check for each condition if we use AnyState but we can check for only one (in best case) with entry/exit, this generally reduces cost for checking an parameter in a state. Combined with Entry / Exit to 1D BlendTree optimization, which is implemented in previous release, your AnyState layer may be optimized to 1D BlendTree. Optimize Texture in Trace nad Optimize #1181 #1184 Avatar Optimizer will pack texture and tries to reduce the VRAM usage. Currently liltoon is only supported. Copy Enablement Animation to Merge Skinned Mesh #1173 This feature copies activeness / enablement animation from merge target renderers to the merged renderer. This feature is not enabled by default. You have to enable it in the inspector. This feature supports copying activeness animation of activeSelf of the GameObjects or ancestors of the GameObjects. However, this feature does not work if multiple GameObjects (or both GameObject and Renderer itself) are animated. In addition, this feature will be animate the enabled of the merged renderer, so you must not animate the enabled of the merged renderer. If animations are unsupported, AAO will show an error message and abort the build. Support Read/Write disabled Meshes with Av3Emulator Enabled #1185 Previously, AAO cannot process meshes with Read/Write disabled if AAO is triggered by Av3Emulator. Since this release, AAO can process meshes with Read/Write disabled if AAO is triggered by Av3Emulator. In addition, AAO now supports non-Float32 vertex buffers. We still use Float32 internally so Int32 data might lose precision a little. However, AFAIK there is no real-world problem with this so we implemented this way. If you found such a case, please report it. This change make AAO incompatible with Unity without Graphics. If you\u0026rsquo;re building your avatar with batchmode with -nographics, please remove -nographics. Asset Description for Avatar Modify Support bundled in an avatar, Shinano #1189 Changed # Skip Enablement Mismatched Renderers is now disabled by default #1169 You still can enable it in the Inspector. This change does not affect the behavior of previously added components. Use UInt16 index buffer if possible even when total vertex count is more than 2^16 #1178 With baseVertex in index buffer, we can use UInt16 index buffer even if total vertex count is more than 2^16. Of course, if one submeh references wide range of vertices, we cannot use UInt16 index buffer so we still use UInt32 index buffer in such a case. Removed # Unity 2019 Support #1146 For 2019 users, please use 1.7.x. 1.7.12 - 2024-08-27 # 1.7.12-beta.3 - 2024-08-25 # Fixed # Broken validation for MergePhysBone merging PhysBones with specified target #1160 1.7.12-beta.2 - 2024-08-23 # Fixed # FinalIK Gimmicks with IKExecutionOrder is broken #1153 1.7.12-beta.1 - 2024-08-22 # Changed # Rewritten Check for Update system #1151 Fixed # VRCConstraints with Target might be removed unexpectedly #1150 1.7.11 - 2024-08-08 # Added # VRCSDK 3.7.0 support #1140 This includes VRCConstraints support 1.7.11-beta.1 - 2024-08-07 # Fixed # Some Humanoid Bones might be removed #1137 Repeated AddPathDependency is broken. Render is broken if all weighted bone is none and some other non-weight bone is not none #1138 1.7.10 - 2024-08-02 # Added # Experimental VRCConstraints support #1129 #1130 This only works for VRCSDK 3.6.2-constraints.3 3.6.2-constraints.4 and not works with other versions including future versions. 1.7.10-beta.1 - 2024-07-30 # Fixed # AutoMergeSkinnedMesh is broken if all merging meshes has no SubMeshes #1127 1.7.9 - 2024-07-25 # 1.7.9-beta.1 - 2024-07-25 # Fixed # Index out of bounds error with remove mesh by mask with negative UV #1123 1.7.8 - 2024-07-22 # 1.7.8-beta.1 - 2024-07-21 # Fixed # Index out of bounds error with remove mesh by mask #1119 NRE with Generic Avatar #1122 1.7.7 - 2024-07-08 # 1.7.7-beta.1 - 2024-07-08 # Added # Add Traditional Chinese #1102 Fixed # VRCAnimatorPlayAudio support is broken #1114 1.7.6 - 2024-06-17 # 1.7.6-beta.2 - 2024-06-16 # Fixed # Remove Zero Sized Polygon may remove small polygons #1098 1.7.6-beta.1 - 2024-06-15 # Fixed # BlendTree with NormalizedBlendValues Broken with MergeBlendTree #1096 1.7.5 - 2024-06-10 # 1.7.5-beta.2 - 2024-06-07 # Added # Warnings for bad API Usages #1091 Changed # Ignore floating point precision error in Merge PhysBone #1086 Animation Warning of Merge Skinned Mesh will not generated if source Renderer is not animated #1087 Expression Parameters are now considered as a part of Avatar Dynamics Parameter destination #1089 Relax condition for scaled evenly check #1092 Trace and Optimize will merge more bones than before. Removed # Write to Asset on Play menu item which is no-op #1085 Fixed # Particle Syatem with Mesh Renderer shape will be broken #1093 1.7.5-beta.1 - 2024-06-03 # Fixed # Merge BlendTree Layer will break some BlendTrees that have overriden by other layers #1084 1.7.4 - 2024-05-17 # Fixed # Invalid AABB error message from UnityEngine if there are no source for Merge Skinned Mesh #1068 1.7.4-beta.1 - 2024-05-11 # Fixed # Some rare material swap animation can cause exception #1067 1.7.3 - 2024-05-10 # 1.7.3-rc.1 - 2024-05-10 # Added # Declare VRCSDK 3.6.x compatibility #1060 Fixed # Mesh preview may cause empty mesh on enter play mode if reload scene is disabled #1064 MMD Compatibility can be broken with Merge BlendTree Layers #1065 1.7.2 - 2024-05-09 # 1.7.2-rc.2 - 2024-05-08 # Fixed # Animators depends on the WD=off behavior can be broken #1062 1.7.2-rc.1 - 2024-05-08 # Fixed # Entry/Exit to BlendTree broken with None motion in default state 1057 An error with MergePhysBone #1061 1.7.1 - 2024-05-07 # Added # Add Simplified Chinese translation #1055 1.7.1-rc.1 - 2024-05-06 # Added # Implement mask texture editor #1044 Changed # Improved behavior with Read/Write Off #1045 Because of Unity limitation, AAO cannot process meshes with R/W off on Start so it will be error. However, on Awake, we can read them so AAO should process them. Since this version, AAO will process meshes with R/W off on Awake. This reduces the number of errors on the apply on play. If you\u0026rsquo;re using Av3Emulator, you still see the error. In addition, in such case, we\u0026rsquo;ll show Auto Fix button on the error message. If you press the button, AAO will fix the error by changing the mesh to read/write enabled. Advanced Options section has benn renamed to Debug Options #1052 This express the purpose of the section more clearly. Added Advanced Optimizations and moved Remove Zero sized Polygons to it #1052 The Remove Zero sized Polygons can break some shaders or animations so it\u0026rsquo;s not enabled by default. To make it more clear, we moved it to Advanced Optimizations. Fixed # Material Slot animations for multi-material multi-pass rendering are broken #1042 Previously we only preserves animations for the number of submeshes instead of material slots. Relax Bounds condition for Automatic Merge Skinned Mesh #1043 Previously, AAO doesn\u0026rsquo;t merge Skinned Meshes if bounds are different accurately. Since this version, AAO will merge meshes if bounds are the same with precision to the last 6 digits of decimal point. Entry/Exit to BlendTree broken with None state 1048 Particle System with bone-rigged Skinned Mesh Renderer will be broken #1054 1.7.0 - 2024-04-30 # 1.7.0-rc.4 - 2024-04-26 # Changed # Disabled AutoFreezeBlendShape for Skinned Mesh Renderers with Cloth component #1029 According to the report, making some polygons zero-size by AutoFreezeBlendShape will make initializing avatar extremely heavy. After a small discussion, we decided to not automatically optimize Skinned Mesh Renderers with Cloth component. Fixed # Animating m_Enabled of Animator as a Behavior is broken #1028 Since Animator.property become animating float animation property named property, AAO must keep it as Behavior.m_Enabled instead of Animator.m_Enabled but we were not. 1.7.0-rc.3 - 2024-04-24 # 1.7.0-rc.2 - 2024-04-24 # Changed # It will be error if read/write mesh is off in play mode again #1018 I found that we may not possible to read mesh with r/w mesh off mode in play mode with the Av3Emulator. Fixed # Box Editor of Remove Mesh in Box can be broke with scale of Skinned Mesh Renderer #1019 Automatic Merge Skinned Mesh is broken with BlendTree #1020 Automatic Merge Skinned Mesh breaks mesh-shaped Particle System #1021 In addition, reference to Skinned Meshes might be broken and this is also fixed. 1.7.0-rc.1 - 2024-04-19 # 1.7.0-beta.7 - 2024-04-16 # Fixed # NRE with AutoMergeSkinnedMesh #1010 Error with some rare animation clip #1011 1.7.0-beta.6 - 2024-04-13 # Added # Animations animating missing GameObject is removed #994 Since this update, animations that targeting GameObjects with post-AAO paths is no longer working. Please create animations that targeting GameObjects with pre-AAO paths. Remove Mesh by Mask #998 With this component, you can remove polygons with mask texture. You can use use mask for MeshDeleterWithTexture or alpha mask to remove polygons. Remove Empty SubMesh in Trace and Optimize #1007 This removes empty SubMeshes including becomes empty by optimization. Fixed # dependency is not child of root error if humanoid bone is moved to out of animator game object #995 1.6.13 - 2024-04-13 # Fixed # Animator Controller on the VRCStation will be broken #1002 Remove Component can be fails with RequireComponent attribute #1003 1.6.12 - 2024-04-09 # Removed # Activeness Optimization for Constraint component #996 The constraint component is too complex to optimize correctly and reliably 1.7.0-beta.5 - 2024-04-07 # Added # Components API for Scripting Usage #976 Fixed # Fix skipped parameter values in Entry/Exit to BlendTree optimization #991 1.6.11 - 2024-04-07 # Fixed # Bounds become broken if Update When Offscreen is enabled #990 1.7.0-beta.4 - 2024-04-05 # Changed # Renamed MergeDirectBlendTree(Layers) to MergeBlendTreeLayer #984 1.6.10 - 2024-04-05 # Fixed # Missing Reference Exception with Trace and Optimize #986 1.7.0-beta.3 - 2024-04-04 # Added # Merge non Direct BlendTree in MergeDirectBlendTree #980 Support bool parameters in Entry/Exit to BlendTree optimization #982 Fixed # Skip Merge Direct BlendTree Option is flipped #978 1.7.0-beta.2 - 2024-04-01 # Changed # Relax preconditions of Entry/Exit to BlendTree optimization #970 Fixed # Some animation is Falsely detected as constant #968 Activeness of renderer GameObject is not correctly considered #972 Exclusions is not working for Automatic Merge Skinned Mesh #972 1.7.0-beta.1 - 2024-03-29 # Added # Animator Optimizer #854 Most features of Animator Optimizer is not available in Unity 2019. Animator Optimizer optimizes your Animator Controller without behaviour Changes Current Optimizer includes the following optimization Remove meaningless properties #854 Converts Entry / Exit to 1D BlendTree #854 #867 #927 Merges multiple Direct BlendTree to single Direct BlendTree #870 Removes meaningless Animator Layers #870 Asset Description #847 Asset Description is the file to provide information of your assets for Avatar Optimizer. Please see documentation for more details. Warning for material animation in Merge Skinned Mesh #769 Merge Skinned Mesh does not support animating material properties differently. (In other words, it can be broken.) Since this version, AAO will warn for such a case. If you animated all materials from same animations, your animation will not be warned. API for declaring dependency relationship to the name of the component #943 You can use this API to not change the name of the GameObject. Configuring Clamp BlendShapes (Deprecated) #957 Since VRCSDK 3.5.1, VRCSDK sets Clamp BlendShapes (Deprecated) to true on assembly reload. This is not a good setting for AAO in EditMode since AAO does not support clamping BlendShapes. That\u0026rsquo;s why AAO now configures Clamp BlendShapes (Deprecated) to false in edit mode and true in play mode. PlayMode is usually used for testing the avatar behavior so it\u0026rsquo;s better to have the same setting as VRChat client. If you want not to change this setting, please disable Tools/Avatar Optimizer/Configure Clamp BlendShape Weight. Automatic Merge Skinned Mesh #952 Trace and Optimize now automatically merges Skinned Meshes if possible. Trace and Optimize will merge your mesh if the material properties or enablement of the mesh is animated similarly and has no BlendShapes. Changed # MergePhysBone now corrects curve settings #775 MergePhysBone now warns if chain length are not same #775 MergePhysBone with only one source is now error #775 It was not working well and not a error by a bug. Animator Parser is completely rewritten #850 New Animator Parser allow us to track animating properties animated by components removed by AAO. PhysBone that swings no bones are now removed #864 I found such a PhysBone on Lime so I added this feature. Switched Localization system to NDMF from CL4EE #873 Since this release, Avatar Optimizer is no longer depends on CL4EE. Because VCC doesn\u0026rsquo;t remove unused packages, CL4EE may still be installed on your project. If you want to remove CL4EE, please remove it manually. Suppressed animated BlendShape warning of FreezeBlendShape if it\u0026rsquo;s animated to a few constants #881 Modern models have tons of BlendShapes to change their face shape but emotion animation of some of them animates such a BlendShapes to constant (default value). That\u0026rsquo;s unnecessary (incorrect I think) and force users to remove or change the clip when user wants to face shape. I see AAO users use FreezeBlendShapes for overriding such a BlendShapes on twitter. I think using this way is reasonable enough so I suppressed the warning if AAO detected such a usage. Minimum VRCSDK to 3.3.0 #882 VRCSDK 3.3.0 is required for stable NDMF-VRCSDK compatibility. Endpoint Position settings for newly created MergePhysBone is now Copy instead of Clear #945 The Clear settings will increase the number of PhysBone Transforms so it\u0026rsquo;s not better as a default settings. Improved activeness animation warning in Merge Skinned Mesh #948 Reduced false-positive warnings Previously, AAO warns if activeness warning is applied to different GameObjects. However, this can be false-positive if animation is applied to different GameObjects with same timing. Since this version, AAO will not warn if the activeness is animated in same animation clip with same curve. Combined warning per Merge Skinned Mesh component. Previously, AAO warns for each source Renderers. Since this version, AAO creates one warning for each Merge Skinned Mesh component. Add error for Cloth component in Merge Skinned Mesh component #949 The Cloth component is not supported by Merge Skinned Mesh component. In previous versions, AAO will keep the source Skinned Mesh Renderer if it\u0026rsquo;s with Cloth component by bug. Since this version, AAO will make an error if the source Skinned Mesh Renderer is with Cloth component. Remove Unused Objects now removes PhysBones and Contact Receivers with parameters defined but not used by Animator Controllers #959 Previously, AAO did not remove PhysBones and Contact Receivers if they are defined in Animator Controllers whether they are used or not. I thought such a PhysBones on the base body are rare but my friend told me there is Manuka has such a PhysBone so I added this feature. Dropping GameObject to PrefabSafeSet adds the All components on the GameObject to the PrefabSafeSet #960 You can add all PhysBones on the GameObject by dropping the GameObject to the MergePhysBone component. MergeSkinnedMesh now warns if Root Bone or Anchor Override are not set #963 Removed # Compatibility with VRCQuestTools v1.x #847 Please use VRCQuestTools v2.x, which has compatibility with AAO. Fixed # Inspector of ComponentTypePair (GCDebug) is broken #846 Bones swung by unused PhysBones (which will be removed by AAO) are not merged #850 Note that To fix this problem, AnimatorParser is almost completely rewritten. It\u0026rsquo;s not expected to have behavior change, but if you found some, please report it. Re-fix Nested Constraint can be broken with Trace and Optimize #880 Fix non-VRChat project support #884 Fix VRM support #892 ArgumentNullException in Edit-mode Remove Mesh Preview #942 Bad behavior if EditMode preview is enabled when entering play mode #956 PlayableLayerControl or AnimatorLayerControl on non-root animator are ignored #964 1.6.9 - 2024-03-27 # 1.6.9-beta.3 - 2024-03-24 # Fixed # ContextHolder become unknown component in NDMF 1.4.0 #946 1.6.9-beta.2 - 2024-03-22 # Added # Support for VRCSDK 3.5.2-beta.2 #935 1.6.9-beta.1 - 2024-03-16 # Added # Support for VRCSDK 3.5.2-beta.1 #926 1.6.8 - 2024-03-12 # Fixed # If some component refers external component, internal error #921 1.6.7 - 2024-02-28 # 1.6.7-beta.1 - 2024-02-28 # Fixed # Compilation Error due to VRCImposterSettings with VRCSDK 3.2.x #905 Skinned Mesh Renderers with None mesh will become Mesh with no polygons #906 This may affects bounds of Performance Rank in VRChat Exclusions not working with Automatically Remove Zero Sized Polygons #907 Fix non-VRChat project support #884 (backport in #909) Merge Toonlit with uv tiling is broken #911 1.6.6 - 2024-01-31 # Fixed # Some features are not working well if Trace and Optimize is not attached #876 1.6.5 - 2024-01-29 # Changed # use stable version of NDMF 1.3.0 or later #821 1.6.5-rc.3 - 2024-01-27 # Changed # Reverted NDMF to 1.3.0-rc.3 #858 NDMF 1.3.0-rc.4 or later does not execute Optimizing phase on entering play mode. See this issue for more details. Fixed # Nested Constraint can be broken with Trace and Optimize #857 1.6.5-rc.2 - 2024-01-24 # Changed # Project is slightly renamed to AAO: Avatar Optimizer #830 The term AAO and Avatar Optimizer are not changed, but display name on the VCC is changed to AAO: Avatar Optimizer Upgrades NDMF to 1.3.0-rc.4 #853 Fixed # Humanoid Bones may be removed by Trace and Optimize #831 Add license, documentationUrl, and changelogUrl to package.json #851 1.6.5-rc.1 - 2024-01-07 # Changed # Upgrades NDMF to 1.3.0-rc.1 #815 Use Title instead of Description since substation in Title is implemented Fixed # Reference to meshes will be merged is removed #808 VRM: Fix MergeSkinnedMesh breaking BlendShapeClip / VRM10Expression #810 Unknown component warning were shown multiple time for one type #818 In addition, location of the unknown components are shown on the error report. AvatarOptimizer didn\u0026rsquo;t register modification to ObjectRegistry #815 Empty Armature trick broken #819 Added workaround for Array index (n) is out of bounds (size=m) error 1.6.5-beta.1 - 2023-12-28 # Changed # AvatarOptimizer now uses ErrorReporting API of NDMF instead of our own API #805 Fixed # Fix support for UniVRM components #802 1.6.4 - 2023-12-10 # 1.6.4-beta.1 - 2023-12-10 # Fixed # Error with generic avatar in 2022 #794 Assertion Error in some rare case #795 1.6.3 - 2023-12-09 # Added # Support for VRCSDK 3.5.x #787 Actually, previous version of AAO works well with VRCSDK 3.5.x / Unity 2022 with tiny bugs. I\u0026rsquo;ve fixed some bugs in Unity 2022 in this release. Since this version, package.json declares Avatar Optimizer is compatible with VRCSDK 3.5.x. I was planned to release this changes while VRCSDK 3.5.0 is in beta. However, VRCSDK 3.5.0 beta was only 3 hours so I could not. Fixed # Fix NullReferenceException on Unity 2022 when extra Animator components are present #778 Fix Errors with Generic Avatars #779 Editing Prefabs with AAO Components in Unity 2022 will cause Error #782 Error if there are reference to Prefab Asset PhysBone Collider #783 Remove Mesh in Box editor broken if inspector is narrow #784 Errors for partially incorrectly configured avatars #786 Since this release, instead of internal errors, warnings are shown 1.6.2 - 2023-11-30 # 1.6.2-rc.1 - 2023-11-30 # Fixed # Path remapping for merge bone will not work well in some (relatively rare) case #764 Error due to PhysBone collider with root bone outside avatar #766 1.6.1 - 2023-11-29 # Fixed # Error if there are None colliders for PhysBone #758 BlendShapes can broken in extreamly rare cases #760 It seems this is due to Unity bug. 1.6.0 - 2023-11-27 # 1.6.0-rc.4 - 2023-11-25 # Fixed # Error if there are null in ingore transforms of PhysBone #749 1.6.0-rc.3 - 2023-11-25 # Fixed # MergeBone breaks ignoreTransforms of PhysBone #745 freeze meaningless may cause FreezeBlendShape:warning:animation warning #746 1.6.0-rc.2 - 2023-11-22 # Fixed # FinalIK Components will be removed #742 1.6.0-rc.1 - 2023-11-21 # Fixed # Remove Unused Object may break ParticleSystem #738 Trigger Colliders can be disapper if you specify Transform instead of Collider instance. Initially diabled particle system module will be ignored 1.6.0-beta.12 - 2023-11-21 # Added # PhysBone Optimization #733 Unnessesary isAnimated is now unconfigured Floor Colliders with same configuration will be merged to one floor collider Minimum Support for FinalIK #735 Fixed # Some missing components warnings #736 warning for ONSPAudioSource, VRCImpostorSettings, and RectTransform are fixed 1.6.0-beta.11 - 2023-11-18 # Fixed # False Positive warning for constant animation in Freeze BlendShape #722 Error if we merged Viseme BlendShapes #728 1.5.11 - 2023-11-18 # 1.5.11-beta.1 - 2023-11-17 # Fixed # Dynamic Bone support not working #727 1.6.0-beta.10 - 2023-11-13 # Added # Error for MergeBone on the Avatar Root #716 Warning for freezing animated BlendShapes #719 Fixed # Compatibility with transform moving plugins #715 Remove Mesh in Box was not working well with FloorAdjuster 1.6.0-beta.9 - 2023-11-12 # Fixed # Humanoid of Avatar Root Animator broken #714 1.6.0-beta.8 - 2023-11-11 # Fixed # Animator of AvatarRoot diesappears #711 1.6.0-beta.7 - 2023-11-11 # Fixed # MergeSMR broken #710 1.6.0-beta.6 - 2023-11-11 # Changed # Remove Unused Objects removes meaningless Animators and Renderers #709 Renderers without Mesh and Animators without AnimatorController is meaningless Fixed # Enablement mismatched renderers are merged instead of matched renderers #705 1.6.0-beta.5 - 2023-11-08 # Fixed # PPtr / Object animation not working #703 1.6.0-beta.4 - 2023-11-08 # Fixed # eyelids BlendShape Removed error for non-AAO avatars #696 bounds can be changed in apply on play if updateWhenOffscreen is true #697 Animations for most components under MergeBone is not mapped #700 1.6.0-beta.3 - 2023-11-06 # Added # Remove Zero Sized Polygons #659 Add support for UniVRM components #653 Support for Mesh Topologies other than Triangles #692 Skip enablement mismatched Renderers in Merge Skinned Mesh #670 This is now enabled by default for newly added Merge Skinned Mesh. Changed # When you\u0026rsquo;re animating activeness/enablement of source renderers, warning is shown since this release #675 Fixed # proxy animation can be modified #678 complex shader with SkinnedMeshRenderer without Bones Brokebn #694 1.6.0-beta.2 - 2023-10-31 # Added # Small performance improve #641 Ability to prevent changing enablement of component #668 Changed # All logs passed to ErrorReport is now shown on the console log #643 Improved Behaviour with multi-material multi pass rendering #662 Previously, multi-material multi pass rendering are flattened. Since 1.6, flattened if component doesn\u0026rsquo;t support that. BREAKING API CHANGES: Behaviour components are renamed to HeavyBehaviour #668 Removed # Preventing removing IEditorOnly in callback order -1024 #658 This is no longer needed since 1.5.0 but I forgot to remove so I removed in 1.6 Fixed # Prefab blinks when we see editor of PrefabSafeSet of prefab asset #645 #664 Fixes in 1.5.9 #654 1.5.10 - 2023-11-04 # Fixed # RigidBody Joint can be broken #683 1.5.9 - 2023-10-29 # 1.5.9-rc.1 - 2023-10-28 # Fixed # Animation clip length can be changed #647 1.6.0-beta.1 - 2023-10-25 # Added # Public API for registering component information #623 Documentation for developers about compatibility with Avatar Optimizer #623 Disabling PhysBone animation based on mesh renderer enabled animation #640 If you toggles your clothes with simple toggle, PhysBones on the your avatar will also be toggled automatically! Removed # Legacy GC #633 Fixed # Improve support of newer Unity versions #608 Improve support of projects without VRCSDK #609 #625 #627 1.5.8 - 2023-10-20 # 1.5.8-rc.1 - 2023-10-20 # Fixed # warning about VRCTestMarker when Build \u0026amp; Test #628 1.5.7 - 2023-10-19 # 1.5.7-beta.1 - 2023-10-19 # Added # Add compatibility for VRCQuestTools #619 Fixed # AutoFreezeBlendShape will freeze BlendShapes with editor value instead of animated constant #622 1.5.6 - 2023-10-17 # 1.5.6-rc.1 - 2023-10-17 # Removed # Error for Read/Write Mesh off Mesh #615 Since AAO creates Mesh every time, no more error is required! Fixed # BindPose Optimization may break mesh with scale 0 bone #612 Error from Preview System when opening inspector of GameObject without SkinnedMeshRenderer #613 1.5.6-beta.2 - 2023-10-16 # Changed # Make no-op as possible if no AAO component attached for your avatar #603 Error Report window is refreshed after exiting play mode #606 Fixed # Update notice may show incorrect version #602 Preview button is not disabled even if mesh is none #605 1.5.6-beta.1 - 2023-10-16 # Fixed # Multi-frame BlendShape can be broken #601 1.5.5 - 2023-10-15 # 1.5.5-rc.1 - 2023-10-15 # Fixed # BlendShape can be broken with MergeBone Optimization #599 1.5.5-beta.1 - 2023-10-15 # Fixed # Constraints and Animations can be broken with Automatic MergeBone #594 NRE with SMR with None with preview system #596 Some Multi-Frame BlendShape broken #597 1.5.4 - 2023-10-14 # Added # Add compatibility for Satania\u0026rsquo;s KiseteneEx #584 Changed # Normal check is skipped for empty mesh #588 Meshes without Normal are shown on the normal existance mismatch warning #588 Fixed # Error with MeshRenderer without MeshFilter #581 Preview not working with VRMConverter #582 AvatarMask about HumanoidBone broken #586 Unused Humanoid Bones can be removed #587 1.5.3 - 2023-10-11 # Changed # Ignore the warning instead of migration from 0.3.x or older #570 Fixed # AnimatorOverrideController may not be proceed correctly #567 Unclear behaviour if we merged meshes with and without normals #569 1.5.3-beta.1 - 2023-10-10 # Fixed # AnimatorController with Synced can be broken #564 1.5.2 - 2023-10-10 # 1.5.2-beta.3 - 2023-10-10 # Fixed # New version notice remains after updating AAO without restarting UnityEditor #559 Freeze BlendShape may break Visame with MergeSkinnedMesh #561 1.5.2-beta.2 - 2023-10-10 # Added # More MMD BlendShapes are registered #552 New English Translation BlendShapes are compatible with AAO! Check for update #554 Changed # You now cannot key any of AvatarOptimizer Components #551 Previously you can key AvatarOptimizer Coponent but it was meaningless. Fixed # GC Debug doesn\u0026rsquo;t include inactive objects #546 EditMode Preview of RemoveMeshInBox is not correct #550 Avatar Standard Colliders can be removed #553 1.5.2-beta.1 - 2023-10-09 # Added # Feature for debugging GC Objects #543 1.5.1 - 2023-10-08 # 1.5.1-beta.1 - 2023-10-08 # Fixed # MergePhysBone component may be shown as unknown components #541 MergeBone may break Fur #542 1.5.0 - 2023-10-07 # 1.5.0-rc.13 - 2023-10-07 # Changed # Change Japanese Translation of \u0026ldquo;BlendShape\u0026rdquo; #535 1.5.0-rc.12 - 2023-10-07 # 1.5.0-rc.11 - 2023-10-05 # Fixed # Viseme may be broken #527 1.5.0-rc.10 - 2023-10-03 # Added # Significant Performance Improvements with small code changes #523 1.5.0-rc.9 - 2023-09-28 # Fixed # Editor of EditSkinnedMesh components may not work well if the object is inactive #518 1.5.0-rc.8 - 2023-09-25 # Added # Warning Dialog for Legacy Modular Avatar #509 Changed # Internal: ErrorReporting is now on NDMF #511 Declare compatible with VRCSDK 3.4.x #513 Fixed # (legacy) Animation Component Disappears #512 VRC_SpatialAudioSource Disappears #512 Unknown component warning for AvatarActivator of NDMF #512 Avoid problematic material slot in MergeSkinnedMesh #508 This avoids Unity\u0026rsquo;s bug in 2019. In Unity 2022, this is no longer needed. 1.5.0-rc.7 - 2023-09-24 # Added # Support for NDMF integration #375 Removed # internal ApplyOnPlay framework #504 1.5.0-rc.6 - 2023-09-24 # Fixed # AvatarMask broken with many cases #502 1.5.0-rc.5 - 2023-09-23 # Added # Full EditMode Preview of RemoveMesh Components #500 Fixed # Remove unused bone references #498 MergeBone will loose some other transform information with extreamly small parent scale #499 1.5.0-rc.4 - 2023-09-21 # Fixed # Left eye disappears #493 MergeBone will loose transform information with extreamly small parent scale #495 Manually configured MergeBone is removed / disabled by GC Objects #496 1.5.0-rc.3 - 2023-09-19 # Fixed # Eyelid bones disappears with Automatic MergeBone #487 1.5.0-rc.2 - 2023-09-15 # Added # Automatically merge unnecessary activeness animated GameObject #476 1.5.0-rc.1 - 2023-09-14 # Fixed # StaticRenderer is not removed with MergeSkinnedMesh #473 1.5.0-beta.14 - 2023-09-14 # Added # Avoid Name Conflict in MergeBone #467 Fixed # Light disappears #466 Automatic MergeBone may break Animation by conflictng GameObject name #467 1.5.0-beta.13 - 2023-09-13 # Added # Feature for debugging GC Objects #464 Fixed # Collider disappears #463 Behaviour can disappears if initially disabled #465 1.5.0-beta.12 - 2023-09-13 # Fixed # Transform animation broken #461 1.5.0-beta.11 - 2023-09-13 # Fixed # Tangent is broken with MergeBone #457 VRCStation disappears #460 1.5.0-beta.10 - 2023-09-12 # Fixed # Error if we merge bone recursively #456 1.5.0-beta.9 - 2023-09-12 # Fixed # Automatic MergeBone doesn\u0026rsquo;t think about animating m_IsActive of GameObject #454 MergeBone may make some bone inactive to active if bone being merged is inactive #454 1.5.0-beta.8 - 2023-09-11 # Fixed # MergeBone will break Normal and Tangent #448 PhysBone for Animator Parameter disappears #452 RemoveMeshByBlendShape on the SkinnedMeshRenderer with MergeSkinnedMesh not working #451 1.5.0-beta.7 - 2023-09-08 # Fixed # GC Objects will remove VRC Contact Components #438 Error if all vertices of some BlendShape is removed by RemoveMeshByBlendShape or RemoveMeshInBox #440 Inactivating parent GameObject or GameObject of component is not accounted in GC Objects #441 1.5.0-beta.6 - 2023-09-07 # Added # Automatic MergeBone in Remove Unused Objects #433 Preserve end bones in Remove Unused Objects #430 This does same thing as Preserve end bones in UnusedBonesByReferenceTool. Deprecated # UnusedBonesByReferenceTool component is now obsolete #430 Newly introduced algorithm ofRemove Unused Objects does same thing! You can migrate to Remove Unused Objects only with one click! Fixed # Unknown type warning is not correctly rendered #427 MergeBone with uneven scale is supported if all children are merged #426 MakeChidlren are detected as Unknown Component #431 1.5.0-beta.5 - 2023-09-06 # Added # Pre-building validation for MergeBone #417 There are some (rare) cases that are not supported by MergeBone. This adds warning for such case. Validation error for self recursive MergeSkinnedMesh #418 Advanced Settings Section for Trace and Optimize #419 Moved Use Advanced Animator Parser to there Added Exclusions for exclude some GameObjects from optimization Added Use Legacy GC to use legacy algotythm for Remove Unused Objects Changed # Performance: Share MeshInfo2 between SkinnedMesh processing and MergeBone #421 Fixed # Unknown Type Error is not localized #410 Crash with Unity 2022 #423 Due to bug in Unity Editor 2022.3 or later, Avatar Optimizer was not compatible with Unity 2022. worldUpObject is not proceed in GC Objects #424 1.5.0-beta.4 - 2023-09-05 # Changed # Merged changes in 1.4.3 #409 1.4.3 - 2023-09-05 # 1.4.3-beta.1 - 2023-09-05 # Fixed # Mesh broken with BlendShape Frame with weight 0 #408 1.5.0-beta.3 - 2023-09-05 # Fixed # Unable to upload avatars with VRCSDK 3.2.x #407 1.5.0-beta.2 - 2023-09-04 # Fixed # Animator Component Disappears #404 MeshFilter Component Disappears with MeshRenderer #405 1.5.0-beta.1 - 2023-09-04 # Changed # Improved \u0026lsquo;Remove Unused Objects\u0026rsquo; #401 Remove Unused Objects now removes unnecessary Components \u0026amp; Bones! 1.4.2 - 2023-09-04 # Fixed # Components/GameObjects can falsely detected as always disabled / inactive. #403 1.4.1 - 2023-09-02 # Fixed # RootBone become None with Merge SkinedMesh #399 1.4.0 - 2023-09-02 # 1.4.0-rc.4 - 2023-09-01 # 1.4.0-rc.3 - 2023-09-01 # Changed # Declare compatible with VRCSDK 3.3.x #395 Understandable Error if there are Missing Script Component #398 Why VRCSDK doesn\u0026rsquo;t have such a error system? 1.4.0-rc.2 - 2023-08-29 # Added # Remove Mesh By BlendShape Editor now can set BlendShape weights to 0/100 #389 Fixed # Clear Endpoint Position may not work well with ignore transforms #390 Clear Endpoint Position doesn\u0026rsquo;t support Undo #390 1.4.0-rc.1 - 2023-08-27 # Added # Multi Pass Rendering of Last SubMesh support #384 Fixed # Unclear Error with Mesh with Read/Write off #386 1.4.0-beta.1 - 2023-08-26 # Added # Support for Multi Frame BlendShapes #333 Add link to help page #382 Advanced Animator Parser #343 This is new AnimatorController parser to collect animated properties This parser understands AnimatorLayers, so with this parser, AAO can freeze BlendShapes which are always finally animated to a constant value. This also understands Additive Layer and BlendTree, so extremely rare problem in previous Animator Parser with Additive Layer or BlendTree will be fixed with this parser. Changed # Auto FreezeBlendShape now freezes meaningless BlendShape #334 If you removed some vertices with RemoveMeshInBox or RemoveMeshWithBlendShape, some BlendShape may transform no vertices Auto FreeseBlendShae now freezez such a BlendShapes Auto FreezeBlendShape now freezes vertices even if already FreezeBlendShape is configured. #334 Meshes generated by AAO now have name #371 This will improve compatibility with UniVRM. VPM Package now doesn\u0026rsquo;t include Test code #372 #373 Better error infomation for MeshInfo2 error #381 Fixed # MergeBone not working well with non-restpose bones #379 1.3.4 - 2023-08-22 # Changed # Internal implementation of Trace and Optimize #361 Documentation Improvements #366 #365 1.3.3 - 2023-08-21 # Changed # BlendShape Weight mismatch warning is now build-time warning instad of validate time warning #359 Thanks to FreeseBlendShape by TraceAndOptimize, most pre-build this warning is false positive. So this warning is moved to build-time only. Fixed # ClearEndpointPosition is not applied for non-first PhysBones on the GameObject #357 Incompatbile with Reload Scene disabaled #358 1.3.2 - 2023-08-20 # 1.3.2-beta.3 - 2023-08-20 # Fixed # No error context in Multi Pass Rendering error #348 1.3.2-beta.2 - 2023-08-20 # Fixed # Multi Passs Rendering not supported error doesn\u0026rsquo;t have location info #347 1.3.2-beta.1 - 2023-08-20 # Fixed # Children of IsActive animated object is not considered #342 1.3.1 - 2023-08-19 # Fixed # Unity Editor may freezes when there are circular dependency #329 Network ID is not assigned for newly created PBs #331 Internally assigned animator controller is not skipped for default choosen playable layer in Trace and Optimize #332 VRCSDK assigned default animators are not considered in Trace and Optimize #332 This bug doesn\u0026rsquo;t create bad behavior for now but will does in the feature. Humanoid Animation are not considered in Trace and Optimize #332 This bug doesn\u0026rsquo;t create bad behavior for now but will does in the feature. Material Slot with null material is created if there are more SubMesh than Material Slots #337 AAO silently ignored multi pass rendering #337 For now, multi pass rendering of last SubMesh is not (yet) supported so now cause error but will be supported. There is no warning about BlendShape weight difference #336 1.3.0 - 2023-08-12 # Changed # ApplyOnPlayGlobalActivator is no longer added for scens without avatars #318 1.3.0-rc.2 - 2023-08-11 # Fixed # Apply On Play may not working well #305 Some components unexpectedly can be added multiple times #306 1.3.0-rc.1 - 2023-08-10 # Added # Remove always disabled objects #278 The new Remove Mesh By BlendShape component removes mesh data based on BlendShapes. #275 Option to process Make Children before modular avatar #296 Changed # Use UnityEditor api to compress texture #276 This also adds some supported texture formats. Every component have AAO prefix in their name now #290 The official shorthand for this tools is AAO! Automatic Configuration component has been renamed to Trace And Optimize #295 Fixed # UnusedBonesByReferenceTool error with SMR without mesh #280 MergeSkinnedMesh doesn\u0026rsquo;t work well with eyelids #284 Animating Behaviour.m_Enabled not working #287 Error Report Window may not refreshed after build error #299 1.2.0 - 2023-07-26 # Added # Support for material swapping animation in MergeSkinnedMesh #274 1.2.0-rc.1 - 2023-07-24 # Fixed # Breaks mesh without tangent #271 1.2.0-beta.1 - 2023-07-17 # Added # Automatic bounds computation in MergeSkinnedMesh #264 Automatic Configuration System #265 Currently FreezeBlendShape can be automatically configured. Changed # Support newly activated avatars in play mode for apply on play #263 1.1.2-beta.1 - 2023-07-17 # This release is mistake.\n1.1.1 - 2023-07-14 # Changed # Avatar GameObject marked as EditorOnly no longer be removed #261 Previously, if avatar GameObject is marked as EditorOnly, whole avatar is removed and this confuses users. Fixed # Name of failed ApplyOnPlayCallback is not included in error message #260 Entering play mode can be extremely slow if you have many avatar on the scene #262 1.1.0 - 2023-07-13 # Changed # Do not compress MergeToonLit generated texture on play #258 1.1.0-rc.1 - 2023-07-10 # 1.1.0-beta.2 - 2023-07-08 # Fixed # Asset files are not generated with Manual Bake #255 Merge Toon Lit duplicates vertex too many #256 This could causes huge increase in avatar size. this is now fixed. 1.1.0-beta.1 - 2023-07-07 # Added # Now we can choose texture format for Merge Toon Lit Material #251 This includes one tiny BREAKING CHANGES. Previously MergeToonLit uses ARGB32 as texture format but for now, it use ASTC 6x6 or DXT5 by default based on platform. Changed # Move Components into Avatar Optimizer folder #247 Previously they are Optimizer folder Completely rewrite apply on play system #249 This replaces way to awake modular-avatar by bdunderscore. The framework for this changes will be published as separated framework when ready. Use binary form of asset file in avatar optimizer output #252 Fixed # Manual bake not working with avatars with invalid file name chars #253 1.0.0 - 2023-06-27 # 1.0.0-beta.5 - 2023-06-26 # If you\u0026rsquo;re using v0.3.x or older, Please upgrade to v0.4.x before upgrading v1.x.x!\nもし v0.3.x 以前を使用しているのであれば, v1.x.xに更新する前に v0.4.x に更新してください!\nChanged # Merged changes in 0.4.12 0.4.12 - 2023-06-22 # Changed # MergePhysBone without ClearEndpointPosition #239 Instead of ClearEndpointPosition, you can use original value, or override Endpoint Position. 1.0.0-beta.4 - 2023-06-19 # If you\u0026rsquo;re using v0.3.x or older, Please upgrade to v0.4.x before upgrading v1.x.x!\nもし v0.3.x 以前を使用しているのであれば, v1.x.xに更新する前に v0.4.x に更新してください!\nChanged # Merged changes in 0.4.8, 0.4.9, 0.4.10, and 0.4.11 0.4.11 - 2023-06-19 # Changed # Show error with user friendly message if BlendShape for eyelids are removed / frozen. #253 Fixed # eyelids BlendShape settings are mapped even if it\u0026rsquo;s disabled #235 This fixes error if internally eyelids BlendShape are frozen. 0.4.10 - 2023-06-17 # 0.4.10-beta.1 - 2023-06-17 # Fixed # PrefabSafesSet\u0026rsquo;s prefab modifications on latest layer are invisible on inspector #229 0.4.9 - 2023-06-16 # Fixed # NullReferenceException if window is in background #226 0.4.8 - 2023-06-16 # 1.0.0-beta.3 - 2023-06-13 # If you\u0026rsquo;re using v0.3.x or older, Please upgrade to v0.4.x before upgrading v1.x.x!\nもし v0.3.x 以前を使用しているのであれば, v1.x.xに更新する前に v0.4.x に更新してください!\nAdded # Merged changes in 0.4.7 #224 0.4.7 - 2023-06-13 # Fixed # Dropping PhysBone to MergePhysBone is not working #221 First box will be size of zero #223 1.0.0-beta.2 - 2023-06-10 # If you\u0026rsquo;re using v0.3.x or older, Please upgrade to v0.4.x before upgrading v1.x.x!\nもし v0.3.x 以前を使用しているのであれば, v1.x.xに更新する前に v0.4.x に更新してください!\nAdded # Merged changes in 0.4.5 and 0.4.6 #218 0.4.6 - 2023-06-10 # Changed # Improve ErrorReport window on build error #216 0.4.5 - 2023-06-06 # Fixed # Error in MergeSkinnedMeshProcessor with RecordMoveProperty #214 1.0.0-beta.1 - 2023-06-05 # If you\u0026rsquo;re using v0.3.x or older, Please upgrade to v0.4.x before upgrading v1.x.x!\nもし v0.3.x 以前を使用しているのであれば, v1.x.xに更新する前に v0.4.x に更新してください!\nRemoved # Save format migration system #199 We no longer see save data in format of v0.3.x or older. Please migrate to v0.4.x format before installing v1.0.0. 0.4.5-beta.1 - 2023-06-05 # 0.4.4 - 2023-06-04 # 0.4.4-rc.1 - 2023-06-04 # Changed # Make Remove Empty Renderer Object enabled by default #208 0.4.3 - 2023-06-02 # Added # Adding multiple values to PrefabSafeSet #200 See this video for more details. Overriden PrefabSafeSet properties are now highlighted as blue and bold #200 Fixed # Error when we removed some modification in PrefabSafeSet #201 There are several situations for this problem: When we removed value in original component When we removed new value in overrides When we reverted added twice in overrides When we reverted deletion in overrides When we reverted fake deletion in overrides Error when we reverted whole PrefabSafeSet with modifications #201 0.4.2 - 2023-05-30 # Fixed # MergeSkinnedMesh depends on other EditSkinnedMesh components does not working #195 Error with removed modified property in PrefabSafeSet Editor #196 Apply on Play may not work #198 0.4.1 - 2023-05-23 # Changed # Disable animating m_Enabled of source SkinnedMeshRenderer #190 Animating m_Enabled of source SkinnedMeshRenderer now doesn\u0026rsquo;t affects merged SkinnedMeshRenderer If you actually want to enable/disable merged SkinnedMeshRenderer, animate m_Enabled of merged SkinnedMeshRenderer instead. 0.4.1-rc.3 - 2023-05-22 # Fixed # Name of Is Animated and Parameter field are not correct #183 We cannot set override setting of Colliders to Copy #183 Error with MergeToonLit #185 Poor word choice in Japanese Translation #174 Localization is not applied for some fields #186 0.4.1-rc.2 - 2023-05-22 # Fixed # Errors in Animation Mapping System #176 Error with removed property Error with Property moved twice Merge PhysBone is not working #177 Previously, values are not copied correctly The help box for description of components without description were shown #178 0.4.1-rc.1 - 2023-05-21 # Changed # Improve Animation Mapping System #172 This should reduce build time 0.4.1-beta.1 - 2023-05-20 # Changed # Reimplemented Animation Mapping System Completely #168 This should fixes problem with objects/components at same place. Fixed # Error is not cleared on build #170 0.4.0 - 2023-05-20 # 0.4.0-rc.2 - 2023-05-19 # Fixed # Error when we opened Editor of MergePhysBone component #167 0.4.0-rc.1 - 2023-05-19 # Changed # Save format for MergePhysBone #166 Previously used backed PhysBone component for override values are removed. There are no changes in behaviour. Just migrate your assets. Fixed # Error with Animator at non-root GameObject #164 Error with copied MergePhysBone component #165 0.4.0-beta.1 - 2023-05-16 # Added # Japanese Translation: 日本語化 #152 Removed # Delete GameObject feature #153 Use EditorOnly tag instead 0.3.5 - 2023-05-15 # Changed # Internal Errors not relates to any Object are now reported #160 Fixed # Error if there are multiple GameObjects with same path #159 0.3.4 - 2023-05-15 # Fixed # Reference to Component will become None #156 BlendShapes for Eyelids can be broken with FreezeBlendShape #154 0.3.3 - 2023-05-14 # 0.3.2 - 2023-05-14 # Added # Manual Bake Avatar #147 Left click the avatar and click [AvatarOptimizer] Manual Bake Avatar 0.3.2-beta.2 - 2023-05-12 # Added # Website for AvatarOptimizer #139 Will be available at https://vpm.anatawa12.com/avatar-optimizer/ For now, beta site is only available at https://vpm.anatawa12.com/avatar-optimizer/beta 0.3.2-beta.1 - 2023-05-09 # Added # Error Reporting System #124 This adds window shows errors on build This is based on Modular Avatar\u0026rsquo;s Error Reporting Window. thanks @bdunderscore Changed # Improved \u0026amp; reimplemented Animation (re)generation system #137 This is completely internal changes. Should not break your project In previous implementation, animations for GameObjects moved by MergeBone, MergePhysBone or else doesn\u0026rsquo;t work well This reimplementation should fix this problem Fixed # Migration fails with scenes/prefabs in read-only packages #136 Now, migration process doesn\u0026rsquo;t see any scenes/prefabs in read-only packages. 0.3.1 - 2023-05-05 # Fixed # Can\u0026rsquo;t remove SkinnedMeshRenderer error #133 This error should do nothing bad but it confuses everyone Bad behaviour with VRCFury on build #134 0.3.0 - 2023-05-04 # Fixed # Parent differ error is gone #129 0.3.0-rc.2 - 2023-05-02 # Fixed # Max Squish is not shown if we\u0026rsquo;re using PhysBone 1.0 #127 0.3.0-rc.1 - 2023-04-30 # Changed # Upgrade CL4EE to 1.0.0 #121 0.3.0-beta.3 - 2023-04-28 # Added # UnusedBonesByReferencesTool #112 This is port of UnusedBonesByReferencesTool by Narazaka Support for VRCSDK 3.2.0! #117 This includes support for PhysBone Versions and PhysBone 1.1 Removed # Removed support for VRCSDK 3.1.x. #117 Dropping VRCSDK support is a BREAKING changes. However, we may drop old VRCSDK support in the minor releases of AvatarOptimizer in the feature. In the other hand, we promise we\u0026rsquo;ll never drop old VRCSDK support in the patch releases. Notice: in the 0.x.y release, y is a minor releases in this project. 0.3.0-beta.2 - 2023-04-26 # Fixed # ShouldIgnoreComponentPatch cases compilation error #108 Not working on the build time #114 0.3.0-beta.1 - 2023-04-24 # Added # Make Children of Me #100 As a alternative of feature removal in same pull request Changed # Use IEditorOnly instead of mokeypatching VRCSDK #102 Move the toggle for Override and the setting of the value after Override closer together. #105 With this changes, the merged PhysBone is now hidden. The merged PhysBone will be shown in Play mode. Now we can Copy (instead of Override) Pull, Gravity, Immobile properties even if Integration Type is overriden. #105 During migration, if Integration Type (previously called Force) is configured to be Override, Pull, Gravity, Immobile will be configured to be Override. This is BREAKING changes. Now we can Copy / Override Immobile Type and Immobile (strength) separately. #105 Previously, if you override Immobile Type, you also required to override Immobile but no longer required. This is BREAKING changes in the semantics of immobile property. Removed # BREAKING Removed Prefab Safe List #95 BREAKING Removed RootTransform feature from MergePhysBone #100 See this issue comment for more datails. BREAKING Dropped support for VRCSDK 3.1.12 or older #101 Now, we require VRCSDK since 3.1.13 (including) until 3.2.0 (excluding) 0.2.8 - 2023-04-19 # 0.2.8-rc.1 - 2023-04-19 # Fixed # NullReferenceException with prefabs in editor for PrefabSafeSet #92 0.2.7 - 2023-04-01 # 0.2.7-beta.1 - 2023-04-01 # Added # Support for VRCSDK 3.1.12 and 3.1.13 0.2.6 - 2023-03-31 # 0.2.6-rc.4 - 2023-03-30 # Fixed # Mesh is broken if more than 65536 vertices are exists #87 Because we didn\u0026rsquo;t check for vertices count and index format, vertex index can be overflow before. Generated assets are invisible for a while #88 0.2.6-rc.3 - 2023-03-29 # Fixed # Assertion does not work well #85 This can make invalid mesh 0.2.6-rc.2 - 2023-03-29 # 0.2.6-rc.1 - 2023-03-28 # Added # Internationalization support #77 This adds way to translate editor elements. However, no other language translation than English is not added yet. Please feel free to make PullRequest if you can maintain the translation. Fixed # Remove Empty Renderer Object is not shown on the inspector #76 normal vector and tangent vector might not be unit length #81 This can be problem with FreezeBlendShape. 0.2.5 - 2023-03-24 # Added # Show SaveVersion internal property on editor. #71 This makes it easier to make it easier to see prefab overrides Changed # use ExecuteAlways instead of ExecuteInEditMode #72 Fixed # None is added/removed on the prefab modifications #73 NullReferenceException in SetCurrentSaveVersion #74 0.2.5-rc.1 - 2023-03-23 # Changed # reduce unnecessary modification in PrefabSafeSet/List #64 Previously PrefabSafeSet/List will always generates array size change modification. Now, array size change will be generated when added/removed elements from the collection. Fixed # save version is not saved again #69 0.2.4 - 2023-03-22 # Changed # make accessing v1 error #61 This reduces future mistakes like #59 Fixed # RemoveMeshInBox refers old v1 configuration #60 0.2.3 - 2023-03-20 # Fixed # instantiating material occurs #58 0.2.2 - 2023-03-20 # Added # Make Children #53 Changed # Do not use cache on applying components now #56 Fixed # NullReferenceException if some component is removed #54 save version is not saved. this may break future migration #55 0.2.1 - 2023-03-20 # 0.2.1-beta.1 - 2023-03-20 # Fixed # Migration failed if some renderer is None #49 0.2.0 - 2023-03-19 # 0.2.0-rc.2 - 2023-03-16 # Added # Reopening scene after migration #47 Fixed # unnecessary logs on migration #38 We may forget checking components on disable objects #46 0.2.0-rc.1 - 2023-03-12 # Fixed # SkinnedMeshRenderers without bones will break mesh #35 Reference to components in prefab asset will remain #37 0.2.0-beta.2 - 2023-03-04 # Added # Forge Migration #31 With this feature, you can re-migrate everything but you may lost changes you made in v0.2 Fixed # Migration of PrefabSafeSet prefab overrides is not well #29 Fixed IndexOutOfError if there are more bones than bindposes #30 0.2.0-beta.1 - 2023-03-03 # Added # Support for Prerelease in publish system #19 Changelogs (including ones for traditional releases) #19 Auto Test #23 Prefab support #11 Changed # BREAKING Save format for many components #11 Even if you added more elements than before on prefab, added elements on prefab instance will be kept. In previous implementation (unity default array prefab overrides implementation), can be broken easily. BREAKING All materials are merged by default #11 Due to save format migration, every materials will be marked as merged. If you have some materials not to be merged, please re-reconfigure that. 0.1.4 # Added # Support for feature Migration be0147b Changed # Box editor of RemoveMeshInBox 15fc931 Installer unitypackage name b32167f Warn if MergeSkinnedMesh is with SkinnedMeshRenderer with Mesh 1016aa6 Fixed # MergeToonLit is always marked as dirty 82ba212 RemoveMeshInBox does not handle bone correctly b2fea4f 0.1.3 # Fixed # Merge ToonLit error d0f1ef2 NRE if some bone is null 88efc2a 0.1.2 # Fixed # FreezeBlendShape behaviour 0cebf27 0.1.1 # Added # (internal) MeshInfo2 system for speed up 36716dd RemoveMeshInBox component 96f3526 Changed # Make VPAI installer unitypackage install 0.1.x 6615991 Editor of FreezeBlendShape cdd2031 Fixed # Several bugs 0.1.0 - 2023-01-16 # Changed # Move components from Anatawa12/ to Optimizer/ 949d267 Fixed # Several bugs 0.0.2 - 2023-01-15 # Added # Build Badges onto README 57614ac How to build onto README 2ad57cc Merge ToonLit Material a460e3f Fixed # FreezeBlendShape remains 95c0d43 0.0.1 - 2023-01-13 # Added # Merge Skinned Mesh Merge PhysBone Freeze BlendShape Merge Bone Clear Endpoint Position "},{"id":5,"href":"/avatar-optimizer/beta/ja/docs/component-kind/avatar-global-components/","title":"Avatar Global Components","section":"コンポーネントの種類","content":" Avatar Global Components # Avatar Global Componentはアバターのルートに追加することでアバター全体に作用するコンポーネントです。\n\u0026ldquo;アバターのルート\u0026quot;とは、アバターの最も上の階層にあるGameObjectのことです。 例えばVRChat用アバターの場合、VRC Avatar DescriptorコンポーネントがあるGameObjectが\u0026quot;アバターのルート\u0026quot;です。\nAvatar Global Componentをアバターのルート以外に追加した場合、インスペクター上にエラーが表示され、コンポーネントは一切動作しません。\n以下のコンポーネントがAvatar Global Componentです。\nTrace And Optimize UnusedBonesByReferencesTool "},{"id":6,"href":"/avatar-optimizer/beta/ja/docs/reference/trace-and-optimize/","title":"Trace And Optimize","section":"コンポーネントの詳細説明","content":" Trace And Optimize (T\u0026amp;O) # 昔のバージョンではAutomatic Configurationという名前でした\nこのコンポーネントは、アバターを走査して自動的にできる限りの最適化を行います。 チェックボックスで自動的に行う最適化を選択することが出来ます。\nこのコンポーネントはアバターのルートに追加してください。(分類: Avatar Global Component)\nTrace and Optimizeは「見た目に絶対に影響させてはならない」という前提の下で、かなり慎重に作られています。\nそのため、見た目に影響が出たり、何らかのギミックが機能しなくなったりといった問題が発生した場合はすべて、例外なくAAOのバグとなります。\n従って、問題が起きた際は報告していただければ、出来る限り修正いたします。 現在、以下の機能を使った自動最適化が可能です。\nBlendShapeを自動的に固定・除去する\nアニメーションなどで使われていないか、常に同じ値になっているBlendShapeを自動的に固定・除去します。 使われていないObjectを自動的に削除する\nアニメーションなどを走査して、使われていないObject(GameObjectやコンポーネントなど)を自動的に削除します。\nまた、切り替えるものと一緒に使われていて、他の方法で使われていないPhysBooneコンポーネントを自動的に切り替えるようにします。 endボーンを残す\n親が削除されていないendボーン1を削除しないようにします。 PhysBoneの設定を最適化する\nPhysBoneの設定について、以下の最適化を行います。 全く同じ設定のPhysBone Colliderを1つに統合します。 不要な場合にIs Animatedのチェックを外します。 アニメーターの最適化\nAnimator Controllerを最適化します。詳細はこのセクションを参照してください。 スキンメッシュレンダラーを統合する\n分かれている必要のないスキンメッシュレンダラーを統合します。\n場合により、自動では一部のメッシュを統合しないこともあるため、必要に応じてMerge Skinned Meshを使用してください。 マテリアルスロットの前後関係を変えることを許可する\nマテリアルスロットの前後関係を変えることで、アバターの描画負荷を減らせる場合があります。\n多くの場合、マテリアルスロットの前後関係は特に意味を持ちませんが、描画順に影響を与える場合もあるようです。 また、以下の設定で自動設定を調節できます。\nMMDワールドとの互換性\nMMDワールドで使われるBlendShapeを固定しないなど、MMDワールドとの互換性を考慮した軽量化を行います。 加えて、以下の高度な最適化が利用出来ます。\n面積がゼロのポリゴンを自動的に削除する\n面積がゼロのポリゴンを削除します。 これは一部のシェーダーやアニメーションによるスケール変化を壊す可能性があるため、注意して使用してください。 他に、バグの回避などに使用するための高度な設定がありますが、それらは不安定であり、不用意に変更するべきではありません。 それらの機能については英語のTooltipやソースコード、または開発者の指示を参考にしてください。\nアニメーターの最適化 # この機能では、アニメーターに対して以下の最適化を行います。\nAnyState式のレイヤーをEntry-Exit式に変換\nアニメーターコントローラーのレイヤーをできる限りEntry-Exit式に変換します。 また、以下の最適化により、AnyState式のレイヤーがBlendTreeに変換されることがあります。 Entry-Exit式のレイヤーをBlendTreeに変換\nアニメーターコントローラーのレイヤーをできる限りBlendTreeに変換します。 BlendTreeを統合\n複数のBlendTreeレイヤーを1つのDirect BlendTreeに統合します。 使われていないレイヤーを削除する\nStateやTransitionがないレイヤーを削除します。 AAOは名前がend(大文字小文字の区別なし)で終わるボーンをendボーンとして扱います。\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n"},{"id":7,"href":"/avatar-optimizer/beta/ja/docs/reference/unused-bones-by-references-tool/","title":"UnusedBonesByReferencesTool","section":"コンポーネントの詳細説明","content":" UnusedBonesByReferencesTool # EditorOnlyなメッシュからしか参照がないボーンをEditorOnlyにします。\nこのコンポーネントはアバターのルートに追加してください。(分類: Avatar Global Component)\nこのコンポーネントは非推奨です。代わりにTrace and Optimizeの使われていないObjectを自動的に削除するを使用してください。 このコンポーネントの動作が改善されることはありません。 これはNarazakaさんのUnusedBonesByReferencesToolを移植したものですが、ビルド時に実行します。\n"},{"id":8,"href":"/avatar-optimizer/beta/ja/docs/component-kind/","title":"コンポーネントの種類","section":"Docs","content":""},{"id":9,"href":"/avatar-optimizer/beta/ja/docs/reference/","title":"コンポーネントの詳細説明","section":"Docs","content":""},{"id":10,"href":"/avatar-optimizer/beta/ja/docs/component-kind/edit-skinned-mesh-components/","title":"Edit Skinned Mesh Components","section":"コンポーネントの種類","content":" Edit Skinned Mesh Components # Edit Skinned Mesh ComponentはSkinnedMeshRendererコンポーネントのあるGameObjectに追加することで、そのSkinnedMeshRendererに作用するコンポーネントです。\nこのコンポーネントには2つの小分類があります。\nSource Component # メッシュなどを生成するコンポーネントです。\n以下のコンポーネントがSource Edit Skinned Mesh Componentです。\nMergeSkinnedMesh\nこのコンポーネントは他の(Skinned)MeshRendererを基にメッシュを生成します。 Modifying Component # 既にあるメッシュなどを(複製して)編集するコンポーネントです。\n以下のコンポーネントがModifying Edit Skinned Mesh Componentです。\nRemove Mesh By BlendShape Remove Mesh in Box Freeze BlendShape Merge ToonLit Material "},{"id":11,"href":"/avatar-optimizer/beta/ja/docs/developers/","title":"開発者向け","section":"Docs","content":""},{"id":12,"href":"/avatar-optimizer/beta/ja/docs/reference/merge-skinned-mesh/","title":"Merge Skinned Mesh","section":"コンポーネントの詳細説明","content":" Merge Skinned Mesh (MergeSMR) # 1つ以上のSkinnedMeshRendererやMeshRendererを1つのSkinnedMeshRendererに統合することが出来ます。\nこのコンポーネントは、メッシュを指定していないSkinnedMeshRendererコンポーネントがある新規GameObjectに追加してください。(分類: Source Edit Skinned Mesh Component)\n利点 # SkinnedMeshRendererを統合することでメッシュを変形させる処理の回数が減り、負荷が軽くなります。 また、同じマテリアルを使用しているマテリアルスロットも統合することができるので、描画負荷も減らす事ができます。\n備考 # アニメーションでメッシュのオン・オフを個別に切り替えたりすることはできなくなりますが、マテリアルに関するアニメーションは統合前のものがそのまま機能します。\nこのコンポーネントはメッシュ・マテリアル・BlendShape・Boundsを設定しますが、その他の設定については変更しません。 Anchor Override等の設定を行うには、MergeSkinnedMeshのあるGameObject上のSkinnedMeshRendererコンポーネントを編集してください。\n[Modular Avatar]を使用している場合は、アバターのルートに[MA Mesh Settings]コンポーネントを追加して設定することにより、アバター全体のAnchor Override等をまとめて設定することができます。 また、このコンポーネントは、服のメッシュや体のメッシュを統合するのには適していますが、顔のメッシュを統合するのには適していません。\nBlendShapeは、頂点とBlendShapeの数に比例して負荷が大きくなる機能です。 顔のメッシュは一般的に多くのBlendShapeを持っているため、統合対象に含めると頂点数の増加により負荷が大きくなってしまいます。\n同様に、体や服のメッシュのBlendShapeは固定・除去することを推奨します。 Freeze BlendShapeコンポーネントを統合対象・統合先のSkinnedMeshRendererコンポーネントのいずれか(または両方)に追加して、BlendShapeを固定・除去することが出来ます。 Trace and OptimizeコンポーネントのBlendShapeを自動的に固定・除去するによっても同様の効果を得ることが出来ます。\nいくつかのケースでは、Trace And Optimizeが自動で同様の処理を行うため、このコンポーネントを使用する必要がないかもしれません。 設定 # スキンメッシュレンダラー # 統合対象のSkinnedMeshRendererの一覧です。\n一番下の\u0026quot;None\u0026quot;と書いてある要素にドラッグ\u0026amp;ドロップすることにより対象を追加し、Noneに戻すことにより対象を一覧から取り除きます。\n静的レンダラー # 統合対象のMeshRendererの一覧です。\n静的メッシュの移動・回転・変形をボーンで再現します。\n一番下の\u0026quot;None\u0026quot;と書いてある要素にドラッグ\u0026amp;ドロップすることにより対象を追加し、Noneに戻すことにより対象を一覧から取り除きます。\n空のレンダラーオブジェクトを削除する # 統合対象のSkinnedMeshRendererが属しているGameObjectにSkinnedMeshRenderer以外のコンポーネントが無い場合、そのGameObjectをヒエラルキーから取り除くオプションです。\n有効無効状態が統合先と異なるレンダラーを統合しない # 統合先のSkinnedMeshRendererと有効無効の状態が異なる(Skinned)MeshRendererが統合対象の中に含まれている場合、それらをビルド時に統合対象から除外するオプションです。\n\u0026ldquo;有効無効状態に関するアニメーションをコピーする\u0026rdquo; # 統合対象の(Skinned)MeshRendererの有効無効状態に関するアニメーションを統合先のSkinnedMeshRendererにコピーするオプションです。\nこの機能は、統合先のSkinnedMeshRendererのenabledプロパティや、そのGameObjectや祖先のGameObjectのactiveSelfプロパティのアニメーションをコピーします。 ただし、アニメーションされているプロパティは1種類しかコピーできないため、複数種類/階層のプロパティがアニメーションされている場合(enabledとactiveSelfの両方がアニメーションされている場合や、自身と親の両方のactiveSelfがアニメーションされている場合など)はエラーになります。\nなお、統合先のSkinnedMeshRendererのenabledに対するアニメーションはこの機能によって上書きされるため、この機能を使用する時は統合先のSkinnedMeshRendererのenabledをアニメーションしてはいけません。\nマテリアルの統合 # 複数の(Skinned)MeshRendererで使用されているマテリアルがある場合、ここに一覧で表示されます。\n統合するにチェックを入れることで、それらのマテリアルスロットを1つに統合します。これはDrawCallを削減します。\n"},{"id":13,"href":"/avatar-optimizer/beta/ja/docs/reference/freeze-blendshape/","title":"Freeze BlendShape","section":"コンポーネントの詳細説明","content":" Freeze BlendShape # BlendShapeをメッシュに固定し、除去することが出来ます。\nこのコンポーネントは、SkinnedMeshRendererコンポーネントのあるGameObjectに追加してください。(分類: Modifying Edit Skinned Mesh Component)\nTrace And Optimizeが自動で同様の処理を行うため、大抵の場合、このコンポーネントを使用する必要はありません。 利点 # BlendShapeの固定・除去には以下の効果があります。\nBlendShapeの値が0以外のときは処理負荷が発生するため、値をアニメーション等で変更しないBlendShapeは固定すると負荷が軽くなります。 値が常に0である場合でも、固定することでアバターの容量を削減することができます。 備考 # 固定すると、アニメーションでの値変更は出来なくなります。\n設定 # BlendShapeの一覧が表示されるので、固定・除去対象のBlendShapeを選択してください。\n"},{"id":14,"href":"/avatar-optimizer/beta/ja/docs/reference/merge-toonlit-material/","title":"Merge ToonLit Material","section":"コンポーネントの詳細説明","content":" Merge ToonLit Material # 手動でテクスチャを並び替えることにより、VRChat/Mobile/Toon Litのマテリアルを1つのマテリアルに統合します。\nこのコンポーネントは、SkinnedMeshRendererコンポーネントのあるGameObjectに追加してください。(分類: Modifying Edit Skinned Mesh Component)\n現在、このコンポーネントは大きな需要があると見られるVRChat/Mobile/Toon Litシェーダーのみをサポートしています。 他のシェーダーのサポートも追加する可能性があります。(サードパーティシェーダーでも対応します) もし対応して欲しいシェーダーがあれば、issueを書いてください。\nこのコンポーネントは新しいマテリアルを作成するため、このコンポーネントで統合されたマテリアルを使用しているマテリアルスロットはAAO Merge Skinned Meshコンポーネントで統合されません。 別々のメッシュで使用されているマテリアルを纏めて統合したい場合は、AAO Merge Skinned MeshコンポーネントのあるGameObjectと同じGameObjectにMerge ToonLit Materialコンポーネントを追加する必要があります。\n設定 # 統合したマテリアルを追加をクリックして、統合後のマテリアルを追加します。 それぞれのマテリアルについて、統合対象のマテリアルを複数選択することが出来ます。 統合対象を追加をクリックするか、ドロップダウンメニューからマテリアルを選択してください。 統合対象のマテリアルについて、テクスチャの配置場所を設定する必要があります。 X, Y, W, Hの値を調整してテクスチャをお好みの位置にを合わせてください。 プレビューを生成をクリックすると、統合後のテクスチャのプレビューがそれぞれ生成されます。\n"},{"id":15,"href":"/avatar-optimizer/beta/ja/docs/reference/remove-mesh-by-blendshape/","title":"Remove Mesh By BlendShape","section":"コンポーネントの詳細説明","content":" Remove Mesh By BlendShape # 指定されたBlendShapeによって動かされる頂点とそのポリゴンを削除します。\nこのコンポーネントは、SkinnedMeshRendererコンポーネントのあるGameObjectに追加してください。(分類: Modifying Edit Skinned Mesh Component)\n利点 # 服で隠れていたりして見えないような部分のメッシュを削除すると、見た目に影響させずに描画負荷やBlendShapeの処理負荷などを減らして軽量化することができます。 このコンポーネントを使用すると、多くの素体に含まれている貫通防止用のBlendShapeを利用して簡単にメッシュを削除することができます。\n設定 # BlendShapeの一覧が表示されるので、BlendShapeを選択してください。 もし選択されたBlendShapeが頂点を許容差より大きく動かしていたら、その頂点を削除します。\n消えて欲しい箇所が消えない場合は許容差の値を大きく、 消えて欲しくない箇所が消えてしまう場合は許容差の値を小さくしましょう。\nプレビューのために、切り替えたBlendShapeの値を自動的に変更するを有効にすると、BlendShapeの指定を切り替えた時に、その値を自動的に100か0に設定します。\n"},{"id":16,"href":"/avatar-optimizer/beta/ja/docs/reference/remove-mesh-by-mask/","title":"Remove Mesh By Mask","section":"コンポーネントの詳細説明","content":" Remove Mesh By Mask # マスクテクスチャで指定した範囲のポリゴンを削除します。\nこのコンポーネントは、SkinnedMeshRendererコンポーネントのあるGameObjectに追加してください。(分類: Modifying Edit Skinned Mesh Component)\n利点 # 服で隠れていたりして見えないような部分のメッシュを削除すると、見た目に影響させずに描画負荷やBlendShapeの処理負荷などを減らして軽量化することができます。\nこのコンポーネントを使用すると、アルファマスク用のテクスチャや、gatosyocoraさんのMeshDeleterWithTexture用のマスクテクスチャを利用して簡単にメッシュを削除することができます。\n設定 # メッシュのマテリアルスロットの一覧が表示されます。 マスクテクスチャによるポリゴンの削除を行う対象のマテリアルスロットを選択してください。\nマスクテクスチャ # ポリゴンの削除に利用するマスクテクスチャです。 「編集」ボタンをクリックすると、マスクテクスチャエディターが開きます。\n削除モード # マスクテクスチャは物によって色が異なるため、対応するモードを選択する必要があります。\n黒(に近い色)の場合にポリゴンを削除するように設計されているマスクテクスチャを利用する場合は、Remove Blackに設定してください。\n白(に近い色)の場合にポリゴンを削除するように設計されているマスクテクスチャを利用する場合は、Remove Whiteに設定してください。\nマスクテクスチャエディター # このウィンドウでマスクテクスチャを編集することができます。\nウィンドウの上部には、編集中のマスクテクスチャに関する情報が表示されます。\n中央には、表示とブラシサイズについての設定が表示されます。\nウィンドウの下部には、元のテクスチャ、マスクテクスチャ、メッシュのUVが表示されます。\nマスクテクスチャを塗るには左ドラッグします。また、右ドラッグまたはShift + 左ドラッグでビューを移動することが出来ます。\nスクロールでズームイン/アウトが、Shift + スクロールでブラシサイズの変更が出来ます。\n"},{"id":17,"href":"/avatar-optimizer/beta/ja/docs/reference/remove-mesh-in-box/","title":"Remove Mesh in Box","section":"コンポーネントの詳細説明","content":" Remove Mesh in Box # 箱で指定した範囲内のポリゴンを削除します。\nこのコンポーネントは、SkinnedMeshRendererコンポーネントのあるGameObjectに追加してください。(分類: Modifying Edit Skinned Mesh Component)\n利点 # 服で隠れていたりして見えないような部分のメッシュを削除すると、見た目に影響させずに描画負荷やBlendShapeの処理負荷などを減らして軽量化することができます。\n設定 # 数値を調整して箱を追加します。 それぞれの箱について、中心位置、大きさ、角度を変更することが出来ます。(ローカル座標で指定します)\nEdit This Boxをクリックして下図のようなギズモを表示します。箱の大きさ、位置、角度を調整することが出来ます。\n例 # 上側の図にある箱の範囲内のメッシュが、下側の図のように削除されます。\n"},{"id":18,"href":"/avatar-optimizer/beta/ja/docs/reference/clear-endpoint-position/","title":"Clear Endpoint Position","section":"コンポーネントの詳細説明","content":" Clear Endpoint Position # このコンポーネントは、Endpoint Positionの値を0に置換し、_EndPhysBoneGameObjectを追加します。\nこのコンポーネントはPhysBoneコンポーネントがあるGameObjectに追加してください。\n今のところ、このコンポーネントに設定項目はありませんが、ボタンが1つあります。 適用して今すぐcomponentを削除するをクリックすると、 この操作が適用され、コンポーネントが削除されます。 アバターを制作するときに便利かもしれません。\n"},{"id":19,"href":"/avatar-optimizer/beta/ja/docs/reference/merge-bone/","title":"Merge Bone","section":"コンポーネントの詳細説明","content":" Merge Bone # Trace And Optimizeが自動で同様の処理を行うため、大抵の場合、このコンポーネントを使用する必要はありません。 このコンポーネントがGameObjectに付いている場合、そのGameObjectは親GameObjectに統合されて取り除かれます。 また、統合対象にその他のコンポーネントが付属している場合はそれらも削除されます。\nもし親のGameObjectにもMerge Boneコンポーネントが付いていた場合、2つのGameObjectはその更に親のGameObjectに統合されます。\nこのコンポーネントが付いているGameObjectの全ての子GameObjectは、その親GameObjectの子になります。\n設定 # 名前の競合を避ける\n統合時に子GameObjectの名前を変更することで、名前の重複によってアニメーションが正しく動かなくなる問題を回避します。 "},{"id":20,"href":"/avatar-optimizer/beta/ja/docs/reference/merge-physbone/","title":"Merge PhysBone","section":"コンポーネントの詳細説明","content":" Merge PhysBone (MergePB) # このコンポーネントは、複数のPhysBoneコンポーネントを1つに統合します。 MultiChildTypeはIgnoreになります。\nこのコンポーネントは新規GameObjectに追加してください。\n備考 # 統合対象は同じGameObjectの子である必要があります。 代わりにこのGameObjectの子にするオプションを使用することも出来ます。\nこのコンポーネントは、PhysBoneのルートとなるGameObjectを新たに作成し、統合対象のPhysBoneによって揺らされるボーンを、作成したGameObjectの子にします。\nなお、ルートとなっているGameObjectも、PhysBoneによって影響を受けるボーンの1つとみなされるため、各Merge PhysBoneごとにPhysBone Affected Transformsの数が1つ増えてしまいます。 このコンポーネントによって追加されるGameObjectがPhysBoneによって揺らされることはないため、これはVRChatのPerformance Rankシステムのバグである可能性があります。\n設定 # このGameObjectの子にする # チェックされている場合、統合対象のPhysBoneが揺らすボーンがこのGameObjectの子になるようにします。\nコンポーネント # 統合対象のPhysBoneコンポーネントの一覧です。\n一番下の\u0026quot;None\u0026quot;と書いてある要素にドラッグ\u0026amp;ドロップすることにより対象を追加し、Noneに戻すことにより対象を一覧から取り除きます。\nオーバーライド(上書き) # 上記の設定項目の下は、PhysBoneの設定項目のようになっています。 それぞれの項目について、統合対象の項目から値をコピーする場合はCopy(すべての統合対象で値が同じ場合のみ有効)、 代わりに新しい値を設定する場合はOverrideを選択してください。\nコライダーについては、Mergeを選択して統合対象のコライダー一覧を統合することも出来ます。\nEndpoint Positionについては、Clearを選択してClear Endpoint Positionを使用することもできます。\n"},{"id":21,"href":"/avatar-optimizer/beta/ja/docs/reference/remove-zero-sized-polygon/","title":"Remove Zero Sized Polygon","section":"コンポーネントの詳細説明","content":" Remove Zero Sized Polygon # 面積がゼロのポリゴンを削除します。\nこのコンポーネントは、SkinnedMeshRendererコンポーネントのあるGameObjectに追加してください。\nこのコンポーネントはビルドの最後の方で実行されるため、Modifying Edit Skinned Mesh Component ではありません。\nこのコンポーネントをMerge Skinned Meshの統合対象となるSkinnedMeshRendererに追加しても効果がありません。\n利点 # 面積がゼロのポリゴンを削除することで、描画負荷を減らすことができます。 見た目に影響を与えることはほとんどありません。\n備考 # モデルファイルでのポリゴンの大きさがゼロであっても、シェーダーによって何かを描画していることがあるため、見た目に影響が出ることがあります。\n設定 # 今のところ、このコンポーネントに設定項目はありません。\n備考 # このコンポーネントはTrace and Optimizeコンポーネントによって自動的に追加されます。 このコンポーネントを手動で追加するよりも、Trace and Optimizeを使うことをお勧めします。\n"},{"id":22,"href":"/avatar-optimizer/beta/ja/docs/reference/make-children/","title":"Make Children","section":"コンポーネントの詳細説明","content":" Make Children # ビルド時に、指定されたGameObjectをこのGameObjectの子にします。\nこのコンポーネントは非推奨です。\nこの機能はアバターの最適化と関係がないため、今後製作予定の非破壊アバター改変ユーティリティのコンポーネントに置き換えられる予定です。\n"},{"id":23,"href":"/avatar-optimizer/beta/ja/docs/developers/asset-description/","title":"Asset Description","section":"開発者向け","content":" Asset Description # Asset DescriptionはAvatar Optimizerにアセットの情報を提供するためのファイルです。\nなぜAsset Descriptionが必要なのか # アバター上の不要な要素を削除するために、Avatar Optimizerはアバターに存在するすべてのコンポーネントのことを知る必要があります。\nAvatar Optimizer v1.6.0でコンポーネントにAAOとの互換性をもたせるためのドキュメントとAPIが追加されましたが、 非破壊ツールでなく、ビルド時に処理を行わないようなツールでは、IVRCSDKPreprocessAvatarCallbackでコンポーネントを削除するのは少し面倒だろうと考えました。\nそのため、Avatar Optimizerに無視してほしい、ビルド時やランタイムで処理を行わないコンポーネントを指定するためのシンプルな仕組みとして、Asset Descriptionがv1.7.0で追加されました。\nなお、非破壊ツールの場合については、正しくない実行順で処理が行われた場合に、Avatar Optimizerがコンポーネントを誤って削除してしまわないように、従来通りIVRCSDKPreprocessAvatarCallbackでコンポーネントを削除することを推奨します。\nAsset Descriptionの作成 # Asset Descriptionを作成するには、Projectウィンドウの右クリックメニューからCreate/Avatar Optimizer/Asset Descriptionを選択してください。\nAvatar Optimizerはすべてのファイルの中からファイル検索を行うため、Asset Descriptionの名前、場所は自由です。\nAsset Descriptionの編集 # Comment # コメント欄はメモを書くためにご自由にお使いください。 Avatar Optimizerはコメントを無視します。\nMeaningless Components # Meaningless ComponentsはAvatar Optimizerに無視してほしいコンポーネントの型の一覧です。 コンポーネントのScript Assetを指定してください。 指定されたScript Assetの型のコンポーネントと、そのサブクラスのコンポーネントはAvatar Optimizerに無視されます。\nAsset Descriptionでは実際のScene上のコンポーネントと同様に、Script AssetがguidとfileIDの形で保持されています。 そのため、クラス名を変更したとしても、シーン上のコンポーネントが壊れていない限り、Asset Descriptionでの指定も問題なく機能します。\n"},{"id":24,"href":"/avatar-optimizer/beta/ja/docs/developers/component-api/","title":"Component Scripting API","section":"開発者向け","content":" Component Scripting API # Avatar Optimizer v1.7.0以降、アバターにAvatar Optimizerのコンポーネントを追加・設定するためのComponent APIを提供しています。 このAPIを使用することで、Avatar Optimizerのコンポーネントを追加するツールやコンポーネントを作成することができます。\nComponent APIが利用可能なコンポーネント # 現時点では、すべてのコンポーネントがComponent APIで利用出来るわけではありません。 Component APIが利用可能なコンポーネントの一覧は以下の通りです。\nRemoveMeshInBox - コンポーネントの追加と設定変更がサポートされています RemoveMeshByBlendShape - コンポーネントの追加と設定変更がサポートされています TraceAndOptimize - デフォルト設定での追加はサポートされていますが、設定変更はサポートされていません 将来のバージョンで追加されるデフォルトで有効な機能との互換性を保つために、コンポーネントの設定変更を行う場合には注意が必要です。 詳細については以下のドキュメントを参照してください。\nはじめに # Component APIを使用するには、assembly definitionファイルでcom.anatawa12.avatar-optimizer.runtimeを参照する必要があります。 Avatar Optimizerはランタイムで動作しないため、ランタイムビルド向けでcom.anatawa12.avatar-optimizer.runtimeに依存してはいけません。\ncom.anatawa12.avatar-optimizer.runtimeにあるいくつかのクラスは、将来のバージョンでランタイム向けビルドから除外される可能性があります。 言い換えると、ランタイム向けのアセンブリでcom.anatawa12.avatar-optimizer.runtimeを使用するのは避けることをお勧めします。エディタ向けのアセンブリでのみ使用するようにしてください。\n次に、コンポーネントの設定を変更する場合は、将来のバージョンで追加される機能との互換性を確保するためにvoid Initialize(int version)メソッドを呼び出す必要があります。 (動作の安定性で説明されているように、)デフォルト設定は変更される可能性があります。\nデフォルト設定は、GameObject.AddComponent\u0026lt;T\u0026gt;()メソッドで追加されるコンポーネントに影響します。 従って、Avatar Optimizerの将来のバージョンとの互換性を保つためには、使用するデフォルト設定のバージョンを指定してInitializeメソッドを呼び出す必要があります。 デフォルト設定のバージョンは、Initializeメソッドのドキュメントに記載されているはずです。\nInitializeメソッドを呼び出さなかった場合、コンポーネントが予期しない動作をしたり、将来的にエラーが発生したりする可能性があります。\n"},{"id":25,"href":"/avatar-optimizer/beta/ja/docs/","title":"Docs","section":"Introduction","content":""},{"id":26,"href":"/avatar-optimizer/beta/ja/posts/","title":"Posts","section":"Introduction","content":""},{"id":27,"href":"/avatar-optimizer/beta/ja/docs/developers/distributing-prefabs/","title":"アセットの配布について","section":"開発者向け","content":" アセットの配布について # Avatar Optimizerは配布したいアセットを軽量化したり最適化したりするのに役立つかもしれません。 Avatar Optimizerに依存するアセットを配布する際の推奨事項をいくつか示します。\nユーザーをAvatar Optimizer公式の配布場所に誘導する # Avatar OptimizerはMITライセンスの下で公開されているため、再配布することが認められています。 それでも、Avatar Optimizer公式の配布場所にユーザーを誘導することを強くお勧めします。\n非公式に配布されるAvatar Optimizerはバージョンが古い可能性があります。 古いバージョンのAvatar Optimizerを使用していると、公式版では既に修正されているバグに遭遇するかもしれません。 また、Avatar Optimizerは前方互換性を保証していないため、新しいバージョンから古いバージョンにダウングレードさせてしまうと、そのユーザーの環境で何らかの問題が発生する可能性があります。\nユーザーをAvatar Optimizer公式の配布場所に誘導する際に推奨される方法は以下の通りです。\nVPMでアセットを配布する場合は、Avatar OptimizerをVPMからインストールするように指示してください。\nVPMで配布するアセットのpackage.jsonでAvatar Optimizerを依存関係として宣言し、 Avatar OptimizerのVPMリポジトリをVCCに追加するようにユーザーを誘導してください。 こちらはAvatar Optimizerの公式リポジトリをVCCに追加するためのリンクです。\nまた、配布するアセットと同じVPMリポジトリにAvatar Optimizerの公式リポジトリをミラーしても構いません。 ミラーする場合は、GitHubのReleasesからミラーするのではなく、VPMリポジトリ自体をミラーしてください。 Avatar Optimizerの公式ドキュメントへのリンクを提供してください。\nこちらはAvatar Optimizer公式のインストールガイドです。 このガイドは、Avatar Optimizerを推奨される方法でインストールするようにユーザーを誘導します。 Avatar OptimizerのBoothページへのリンクを提供してください。\nBoothページはAvatar Optimizer公式の配布場所の1つです。 Boothでは、最新バージョンのVPAIインストーラーunitypackageが含まれています。 VPAIインストーラーunitypackageを同梱し、そのunitypackageをインポートするように指示してください。\nVPAIインストーラーは、Avatar OptimizerのようなVPMパッケージを、unitypackageをインポートするだけでインストールするためのツールです。 Avatar Optimizer 1.x.x用のVPAIインストーラーunitypackageをダウンロードするためのリンクはこちらです。 "},{"id":28,"href":"/avatar-optimizer/beta/ja/docs/developers/make-your-components-compatible-with-aao/","title":"コンポーネントにAvatar Optimizerとの互換性をもたせる","section":"開発者向け","content":" コンポーネントにAvatar Optimizerとの互換性をもたせる # このページでは以下の2つのことを説明します。\nコンポーネントはどのような場合にAvatar Optimizerと非互換になるか どのように互換性を改善するか もし質問があれば、お気軽にfediverseで@anatawa12@misskey.niri.laにご連絡ください。\nコンポーネントはどのような場合にAvatar Optimizerと非互換になるか # Avatar Optimizerが処理する時点でアバターにコンポーネントが存在している場合、そのコンポーネントはAvatar Optimizerと互換性が無い可能性があります。\nAvatar Optimizerはビルド処理の最後の方で動作するように設計されているため、Avatar Optimizerにとって未知のコンポーネントについてはサポートしていません。\n例えば、Avatar Optimizerはコンポーネント等に対するガベージコレクションシステムを実装しています。 使用されているコンポーネントを保持し、未使用のコンポーネントを適切に削除するためには、 最適化時にアバターに存在するすべてのコンポーネントのことを知っておく必要があります。\n未知のコンポーネントによる問題を避けるため、Avatar Optimizerは未知のコンポーネントが以下のようなものであると仮定します。\nコンポーネントが有効かつアクティブになる可能性がある場合は保持される必要がある。 これは、未知のコンポーネントが実行時(VRChat上など)に動作するコンポーネントであると仮定しているためです。 コンポーネントが参照している全てのコンポーネントに依存している。 (上記の仮定は将来的に変更される可能性があります。)\nしかしながら、これらの仮定は正しくない可能性があるため、Avatar Optimizerは以下のような警告を生成します。\nどのように互換性を改善するか # 以下の対応のいずれかを行うことで、互換性を改善することができます。\nAvatar Optimizerが処理する前にコンポーネントを削除する\nコンポーネントが実行時では動作しないものである場合、(すなわち、ビルド時や編集モードでのみ動作するコンポーネントである場合、) Avatar Optimizerより前にアバターを処理し、コンポーネントを削除することが殆どの場合で最善です。\n詳細は下のセクションを参照してください。\nAvatar Optimizerは、Trace and Optimizeの前に処理を行う殆どのAvatar Optimizerコンポーネントにおいて、内部的にこの方法を使用しています。\nAPIを使用してAvatar Optimizerにコンポーネントを登録する\n実行時に動作するコンポーネントや、Avatar Optimizerより後にアバターを処理するために残しておく必要があるコンポーネントの場合、 そのコンポーネントの情報をAvatar Optimizerに登録することができます。\n詳細は下のセクションを参照してください。\nAvatar Optimizerは、Trace and Optimizeの後に処理を行う一部のコンポーネントや、Unity純正のコンポーネント、VRCSDKのコンポーネントなどを保持するために、内部的にこの方法を使用しています。\nAsset Descriptionを使用して、削除しても問題のないコンポーネントとしてAvatar Optimizerに登録する\nAvatar Optimizer v1.7.0以降では、実行時やビルド時で処理を行わないコンポーネント向けに[Asset Description]が追加されています。 ツールが実行時やビルド時に何も行わない場合は、「Avatar Optimizerが処理する前にコンポーネントを削除する」代わりにこの方法を使用してコンポーネントを登録することができます。\n詳細は[Asset Description]を参照してください。\nなお、ツールが実行時やビルド時に何らかの処理を行う場合は、そのコンポーネントをAsset Descriptionで登録することは非推奨です。 実行時やビルド時に何らかの処理を行うコンポーネントをAsset Descriptionで登録してしまうと、 実行順に予期しない変更があったり、指定が正しくなかったりした場合に、コンポーネントがAvatar Optimizerに意図せず削除されてツールが正常に動作できなくなる可能性があります。\nAvatar Optimizerは、編集モードでのみ動作するよく知られているツールとの互換性を保つために、内部的にこの方法を使用しています。\nコンポーネントを削除する # ビルド時において、Avatar Optimizerより前にアバターを処理し、コンポーネントを削除するための方法はいくつかあります。削除には[DestroyImmediate]を用います。\nツールがNDMF1を使用した非破壊ツールの場合は、NDMFのOptimizing phaseより前のPhaseか、 Optimizing phaseの中で(BeforePluginを用いて)com.anatawa12.avatar-optimizer plugin より前にコンポーネントを削除することを推奨します。 Optimizing phaseの中でコンポーネントを削除する場合は、デフォルトのコールバック順序がcom.anatawa12.avatar-optimizer pluginより前であっても、 BeforePluginを指定しておくことを強く推奨します。\nツールがNDMF1を使用していない非破壊ツールの場合は、NDMFのOptimizing phaseより前にコンポーネントを削除することを推奨します。 この場合、現在のNDMFはVRCSDKのRemoveAvatarEditorOnlyの直前であるorder -1025でOptimizing phaseを実行するので、 -1025より小さいcallbackOrderを指定したIVRCSDKPreprocessAvatarCallbackでコンポーネントを削除してください。\nツールのコンポーネントにデータを保持する役割しかなく、実行時やビルド時では処理を行わない場合、 上記のようにIVRCSDKPreprocessAvatarCallbackでコンポーネントを削除するか、 [Asset Description]を使用し、削除しても問題のないコンポーネントとして登録することができます。\nコンポーネントを登録する # ツールのコンポーネントをAvatar Optimizerの処理より後に残しておきたい場合、 Avatar Optimizerにコンポーネントの情報を登録できます。\nまず、Avatar OptimizerのAPIを呼び出すために、assembly definitionファイル2を(存在しない場合)作成してください。\n次に、asmdefファイルのアセンブリ参照にcom.anatawa12.avatar-optimizer.api.editorを追加してください。\nツールをAvatar Optimizerに依存させたくない場合、Version Definesを使用してください。 Avatar Optimizer 1.6.0より前にはAPIが無く、Avatar Optimizer 2.0.0ではAPIの互換性を破壊する可能性があるため、 バージョンの範囲を[1.6,2.0)(または、将来的に追加されたAPIを用いる必要がある場合、より厳密に [1.7,2.0)など)のように指定することを推奨します。\n続いて、ツールのコンポーネントについてのComponentInformationを定義してください。\n#if AVATAR_OPTIMIZER \u0026amp;\u0026amp; UNITY_EDITOR [ComponentInformation(typeof(YourComponent))] internal class YourComponentInformation : ComponentInformation\u0026lt;YourComponent\u0026gt; { protected override void CollectMutations(YourComponent component, ComponentMutationsCollector collector) { // call methods on the collector to tell about the component } protected override void CollectDependency(YourComponent component, ComponentDependencyCollector collector) { // call methods on the collector to tell about the component } } #endif CollectMutationsでは、コンポーネントの処理によって変更される可能性があるプロパティを登録します。\nCollectDependencyでは、ビルド時や実行時でのコンポーネントの依存関係を登録します。\n詳しくはそれぞれのメソッドのxmldocを参照してください。\nAsset Descriptionを作成する # 別ページにある[Asset Description]を参照してください\nbdunderscoreさんが作成したNDMF (Non-Destructive Modular Framework)は、非破壊改変ツールのためのフレームワークです。 Avatar Optimizerは他の非破壊改変ツールとの互換性を確保するためにこのフレームワークを使用しています。\u0026#160;\u0026#x21a9;\u0026#xfe0e;\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nAssembly-CSharp以外のアセンブリを定義するためのファイル。unity docsを参照してください。\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n"},{"id":29,"href":"/avatar-optimizer/beta/ja/docs/tutorial/basic-usage/","title":"基本的な使い方","section":"チュートリアル","content":" 基本的な使い方 # 自動最適化を使用する # アバターには自動的に行える最適化がいくつかあります。\n使用していないBlendShape(シェイプキー)1の除去 BlendShapeの値が0以外のときは処理負荷が発生するため、値をアニメーション等で変更しないBlendShapeは固定すると負荷が軽くなります。 値が常に0である場合でも、固定することでアバターの容量を削減することができます。 使われていないPhysBone等の削除 揺らす対象として存在するメッシュ2が常に無効になっているPhysBoneなどのように、揺らす必要のないPhysBoneが有効になっている場合は計算負荷が余分に発生してしまいます。 アニメーションしたりPhysBoneで揺らしたりすることのないボーンの統合 服のボーンを素体のボーンに入れ子状にして着せるような場合には、それ自身を動かすことがないボーンが多く発生します。そのようなボーンは余分な負荷を発生させてしまいます。 一緒に切り替えていたり、切り替えることがなかったりするメッシュ同士の統合 アバターに服が1着しかない場合、体、髪、服などを別々のメッシュにしておく必要はないかもしれません。 切り替え可能な複数の服がある場合でも、体、髪、下着などを別々のメッシュにしておく必要はないかもしれません。 AvatarOptimizerでは、アバターのルートにAAO Trace And Optimizeコンポーネントを追加するだけで、これらの最適化を自動で行うことができます！\nアバターをアップロードする # AAO Trace and Optimizeコンポーネントを付けた状態で、試しにアバターをアップロードしてみましょう！ AAO: Avatar Optimizerは非破壊改変ツールであり、Playモードに入るときかアバターをビルドするときに処理が行われるため、アップロードを行うのに特別な手順は必要ありません。 通常と同じように、VRCSDKのControl Panelからアバターをアップロードしてください。\nただし、Android(Quest)向けアップロードを行う場合などにおいて、Avatar Optimizerの最適化等によって制限の範囲内に収まるにも関わらず、 VRCSDKのビルド前チェックの時点で制限を超過していてアップロードボタンが押せない場合があります。\nビルド前チェックをスキップする方法はいくつかあります。詳しくはよくある質問を参照してください。\nUploadせずにPerformance Rankを見る方法 # 非破壊改変ツールを使用した改変では、VRCSDKのControl Panel上のPerformance Rankはあてにならなくなります。\nその代わりとして、Playモードに入った際のPerformance Rankをanatawa12\u0026rsquo;s Gist PackのActual Performance Windowを使用して確認することができます。 詳しくはanatawa12\u0026rsquo;s Gist Packの使い方およびActual Performance Windowのドキュメントを参照してください。\n貫通防止用BlendShapeを利用してポリゴンを減らす # 服で隠れていたりして見えないような部分のメッシュを削除すると、見た目に影響させずに描画負荷やBlendShapeの処理負荷などを減らして軽量化することができます。 これを簡単に実現するために、AvatarOptimizerでは多くの素体に含まれている貫通防止用のBlendShapeを利用してメッシュを削除することができます！\n素体のメッシュにAAO Remove Mesh By BlendShapeコンポーネントを追加しましょう！\n想定外の部位が削除されてしまわないかを確認するためにプレビューのために切り替えたBlendShapeの値を自動的に変更するにチェックし、 削除したい部位の貫通防止用BlendShapeを下の一覧から選択しましょう！\n消えて欲しい箇所が消えない場合や、消えて欲しくない箇所が消えてしまう場合には、許容差の値を調整する必要があります！ 許容差は、頂点がBlendShapeによってどのぐらい動けば削除するかを決定するものです。 前者の場合は値を少し大きく、後者の場合は値を少し小さくしましょう！\nBlendShapeはUnity上のモーフィングの名前です。MayaではTarget Shape、BlenderではShape Key、MetasequoiaやMMDではモーフと呼ばれます。\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nこの記事でのメッシュは、UnityのMesh assetではなく、SkinnedMeshRendererやMeshRendererを意味しています。\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n"}]