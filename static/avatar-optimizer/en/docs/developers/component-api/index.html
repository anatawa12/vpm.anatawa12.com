<!doctype html><html lang=en dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="
  Component Scripting API
  #

Since Avatar Optimizer v1.7.0, Avatar Optimizer provides Component API to add Avatar Optimizer components to the Avatar.
By using this API, you can create tools or components that add Avatar Optimizer components.

  Components that supported by Component API
  #

Currently, not all components are supported by Component API.
Here is the list of components that are supported by Component API.

RemoveMeshInBox - Adding component and configuring for that is supported
RemoveMeshByBlendShape - Adding component and configuring for that is supported
RemoveMeshByMask - Adding component and configuring for that is supported
MergePhysBone - Adding component and configuring for that is supported
TraceAndOptimize - Adding with default configuration is supported but configuring is not supported

For components that supports configuring, to keep compatibility with future features that enabled by default,
you need extra attention for the configuration. See document below for more details."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://vpm.anatawa12.com/avatar-optimizer/en/docs/developers/component-api/"><meta property="og:site_name" content="Avatar Optimizer (1.9.1)"><meta property="og:title" content="Component Scripting API"><meta property="og:description" content="Component Scripting API # Since Avatar Optimizer v1.7.0, Avatar Optimizer provides Component API to add Avatar Optimizer components to the Avatar. By using this API, you can create tools or components that add Avatar Optimizer components.
Components that supported by Component API # Currently, not all components are supported by Component API. Here is the list of components that are supported by Component API.
RemoveMeshInBox - Adding component and configuring for that is supported RemoveMeshByBlendShape - Adding component and configuring for that is supported RemoveMeshByMask - Adding component and configuring for that is supported MergePhysBone - Adding component and configuring for that is supported TraceAndOptimize - Adding with default configuration is supported but configuring is not supported For components that supports configuring, to keep compatibility with future features that enabled by default, you need extra attention for the configuration. See document below for more details."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="docs"><title>Component Scripting API | Avatar Optimizer (1.9.1)</title><link rel=icon href=/avatar-optimizer/favicon.png><link rel=manifest href=/avatar-optimizer/manifest.json><link rel=canonical href=https://vpm.anatawa12.com/avatar-optimizer/en/docs/developers/component-api/><link rel=alternate hreflang=ja href=https://vpm.anatawa12.com/avatar-optimizer/ja/docs/developers/component-api/ title="Component Scripting API"><link rel=stylesheet href=/avatar-optimizer/book.min.e0a9d206623624a99ee922419f11e1110a88e06770d97913b11d9ecadaa614a9.css integrity="sha256-4KnSBmI2JKme6SJBnxHhEQqI4Gdw2XkTsR2eytqmFKk=" crossorigin=anonymous><script defer src=/avatar-optimizer/fuse.min.js></script><script defer src=/avatar-optimizer/en.search.min.15d423483e7c17f4c4effb4488575a1fe513c2e56e81554497a4ed9aca5f3500.js integrity="sha256-FdQjSD58F/TE7/tEiFdaH+UTwuVugVVEl6TtmspfNQA=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/avatar-optimizer/en/><span>Avatar Optimizer (1.9.1)</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul class=book-languages><li><input type=checkbox id=languages class=toggle>
<label for=languages class="flex justify-between"><a role=button class="flex align-center"><img src=/avatar-optimizer/svg/translate.svg class=book-icon alt=Languages>
English</a></label><ul><li><a href=/avatar-optimizer/ja/docs/developers/component-api/>日本語</a></li></ul></li></ul><ul><li><a class=ao-stable-beta href=https://vpm.anatawa12.com/avatar-optimizer/beta/en/docs/developers/component-api/>Goto Beta Docs</a></li><li><a class=ao-stable-beta href=https://vpm.anatawa12.com/avatar-optimizer/en/#installation>How to Install</a></li></ul><ul><li class=book-section-flat><span>Tutorial</span><ul><li><a href=/avatar-optimizer/en/docs/tutorial/basic-usage/>Basic Usage</a></li></ul></li><li><a href=/avatar-optimizer/en/docs/basic-concept/>Basic Concepts</a></li><li><a href=/avatar-optimizer/en/docs/faq/>Frequently Asked Questions</a></li><li><a href=/avatar-optimizer/en/docs/bug-report-helper/>Bug Report Helper</a></li><li><a href=/avatar-optimizer/en/docs/changelog/>Changelog</a></li><li class=book-section-flat><span>Component Kinds</span><ul><li><a href=/avatar-optimizer/en/docs/component-kind/avatar-global-components/>Avatar Global Components</a></li><li><a href=/avatar-optimizer/en/docs/component-kind/edit-skinned-mesh-components/>Edit Skinned Mesh Components</a></li></ul></li><li class=book-section-flat><span>Component Reference</span><ul><li><a href=/avatar-optimizer/en/docs/reference/trace-and-optimize/>Trace And Optimize</a></li><li><a href=/avatar-optimizer/en/docs/reference/merge-skinned-mesh/>Merge Skinned Mesh</a></li><li><a href=/avatar-optimizer/en/docs/reference/freeze-blendshape/>Freeze BlendShape</a></li><li><a href=/avatar-optimizer/en/docs/reference/max-texture-size/>Max Texture Size</a></li><li><a href=/avatar-optimizer/en/docs/reference/merge-material/>Merge Material</a></li><li><a href=/avatar-optimizer/en/docs/reference/remove-mesh-by-blendshape/>Remove Mesh By BlendShape</a></li><li><a href=/avatar-optimizer/en/docs/reference/remove-mesh-by-box/>Remove Mesh By Box</a></li><li><a href=/avatar-optimizer/en/docs/reference/remove-mesh-by-mask/>Remove Mesh By Mask</a></li><li><a href=/avatar-optimizer/en/docs/reference/remove-mesh-by-uv-tile/>Remove Mesh By UV Tile</a></li><li><a href=/avatar-optimizer/en/docs/reference/rename-blendshape/>Rename BlendShape</a></li><li><a href=/avatar-optimizer/en/docs/reference/clear-endpoint-position/>Clear Endpoint Position</a></li><li><a href=/avatar-optimizer/en/docs/reference/merge-bone/>Merge Bone</a></li><li><a href=/avatar-optimizer/en/docs/reference/merge-physbone/>Merge PhysBone</a></li><li><a href=/avatar-optimizer/en/docs/reference/remove-zero-sized-polygon/>Remove Zero Sized Polygon</a></li><li><a href=/avatar-optimizer/en/docs/reference/replace-end-bone-with-endpoint-position/>Replace End Bone With Endpoint Position</a></li><li><a href=/avatar-optimizer/en/docs/reference/make-children/>Make Children</a></li><li><a href=/avatar-optimizer/en/docs/reference/merge-toonlit-material/>Merge ToonLit Material</a></li><li><a href=/avatar-optimizer/en/docs/reference/unused-bones-by-references-tool/>UnusedBonesByReferencesTool</a></li></ul></li><li class=book-section-flat><span>For Developers</span><ul><li><a href=/avatar-optimizer/en/docs/developers/system-assumptions/>System Assumptions</a></li><li><a href=/avatar-optimizer/en/docs/developers/asset-description/>Asset Description</a></li><li><a href=/avatar-optimizer/en/docs/developers/component-api/ class=active>Component Scripting API</a></li><li><a href=/avatar-optimizer/en/docs/developers/distributing-prefabs/>Distributing Prefabs</a></li><li><a href=/avatar-optimizer/en/docs/developers/make-your-components-compatible-with-aao/>Make your components compatible with Avatar Optimizer</a></li><li><a href=/avatar-optimizer/en/docs/developers/shader-information/>Shader Information API</a></li></ul></li></ul><ul><li class=book-section-flat><span>Blog Posts(日本語)</span><ul><li><a href=/avatar-optimizer/ja/posts/2024-06-27-one-year-since-stable-release/>v1.0.0一周年を記念してちょっと歴史を振り返る</a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/avatar-optimizer/svg/menu.svg class=book-icon alt=Menu></label><h3>Component Scripting API</h3><label for=toc-control><img src=/avatar-optimizer/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#supported-components>Components that supported by Component API</a></li><li><a href=#getting-started>Getting Started</a></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=component-scripting-api>Component Scripting API
<a class=anchor href=#component-scripting-api>#</a></h1><p>Since Avatar Optimizer v1.7.0, Avatar Optimizer provides Component API to add Avatar Optimizer components to the Avatar.
By using this API, you can create tools or components that add Avatar Optimizer components.</p><h2 id=supported-components>Components that supported by Component API
<a class=anchor href=#supported-components>#</a></h2><p>Currently, not all components are supported by Component API.
Here is the list of components that are supported by Component API.</p><ul><li><code>RemoveMeshInBox</code> - Adding component and configuring for that is supported</li><li><code>RemoveMeshByBlendShape</code> - Adding component and configuring for that is supported</li><li><code>RemoveMeshByMask</code> - Adding component and configuring for that is supported</li><li><code>MergePhysBone</code> - Adding component and configuring for that is supported</li><li><code>TraceAndOptimize</code> - Adding with default configuration is supported but configuring is not supported</li></ul><p>For components that supports configuring, to keep compatibility with future features that enabled by default,
you need extra attention for the configuration. See document below for more details.</p><h2 id=getting-started>Getting Started
<a class=anchor href=#getting-started>#</a></h2><p>To use Component API, you have to reference <code>com.anatawa12.avatar-optimizer.runtime</code> assembly in your assembly definition file.
Since Avatar Optimizer does not work on the runtime, you should not depends on <code>com.anatawa12.avatar-optimizer.runtime</code> assembly for runtime build.<br>We may remove some classes from <code>com.anatawa12.avatar-optimizer.runtime</code> on runtime build in the future.
In other words, it&rsquo;s recommended to avoid use of <code>com.anatawa12.avatar-optimizer.runtime</code> in runtime assembly, you should use it only in editor assembly.</p><p>Second, If you want to configure components, you have to call <code>void Initialize(int version)</code> method to ensure the compatibility with future features.
The default setting of Avatar Optimizer can be changed in the future (as described in <a href=../../basic-concept/#behavior-stability>Behavior Stability</a>).<br>The default setting of Components will be affected to the components added with <code>GameObject.AddComponent&lt;T>()</code> method.
Therefore, to keep behavior compability with future versions, you have to call <code>Initialize</code> method with the version of default configuration you want to use.
The default configuration version should be described in the document of the <code>Initialize</code> method.</p><blockquote class="book-hint warning"><p>Without calling <code>Initialize</code> method, component will behave unexpectedly, or you may get error with future versions.</p></blockquote><blockquote class="book-hint info"><p>Configuring component is only supported just after adding component, and configuring already existing component on the GameObject is unsupported.
This is because some future functionality might be incompatible with the existing component configuration.</p><p>For example, enabling the inversion option of <code>AAO Remove Mesh By Box</code> component, added in v1.8.0, changes the meaning of box, which makes it incompatible with tools intended only for v1.7 and earlier.</p></blockquote><blockquote class="book-hint info"><p>Since Avatar Optimizer v1.9.0, Avatar Optimizer provides Component API for the <code>MergePhysBone</code> component, but it is special with semantic versioning.</p><p>This component is deeply integrated with the PhysBone component of VRChat SDK.
If the implementation of the PhysBone component is changed, corresponding changes in <code>MergePhysBone</code> may be required to maintain functionality.
In that case, we may add new properties or change existing properties of <code>MergePhysBone</code> without following semantic versioning.</p><ol><li><p>When we add that new backward-compatible properties to <code>MergePhysBone</code> for following new PhysBone properties.<br>This is typically done in bumps<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> version of VRChat SDK.<br>We treat adding support for new PhysBone properties as &ldquo;bugfix for unsupported PhysBone features&rdquo;, so this is done in patch version of Avatar Optimizer.</p></li><li><p>When we change signature of existing properties (in other words, introduce breaking changes) of <code>MergePhysBone</code> for following breaking changes of existing PhysBone properties.<br>Avatar Optimizer declares compatibility with specific range of breaking versions of VRChat SDK,
so this change can only be done when Avatar Optimizer introduces support for new breaking<sup id=fnref1:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> version of VRChat SDK.<br>We work to minimize such breaking changes, but please be aware of this possibility when using Component API for <code>MergePhysBone</code>.<br>In some cases, even when using the same version of Avatar Optimizer, property types and others may be different depending on used VRChat SDK version.</p></li></ol><p>To protect your code from breaking changes like above, we recommend to check the VRChat SDK version with vpmDependencies.<br>Breaking changes like above only happen when Avatar Optimizer introduces support for new breaking version of VRChat SDK.<br>Therefore, if you lock the VRChat SDK version with vpmDependencies, your code will be safe from such breaking changes, as long as no conflict in package version happens.</p></blockquote><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>VRChat SDK uses &lsquo;Branding.Breaking.Bumps&rsquo; versioning scheme where Breaking will be incremented for breaking changes, and Bumps will be incremented for backward compatible changes. See <a href=https://vcc.docs.vrchat.com/vpm/packages/#brandingbreakingbumps>Official Documentation</a> for more details.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a>&#160;<a href=#fnref1:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/anatawa12/AvatarOptimizer/edit/master/.docs/content/docs/developers/component-api/index.md target=_blank rel=noopener><img src=/avatar-optimizer/svg/edit.svg class=book-icon alt>
<span>Edit this page</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#supported-components>Components that supported by Component API</a></li><li><a href=#getting-started>Getting Started</a></li></ul></nav></div></aside></main></body></html>